
task.wait(0.1)
local RS = game:GetService("ReplicatedStorage")

if not hookfunction then
    return
end

-- ========================================
-- PART 1: Hook TransitionUI (‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ Loading)
-- ========================================
pcall(
    function()
        local TransitionModule = require(RS.Modules.Game.UI.TransitionUI)

        -- Hook transition() - ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏£‡∏≠ 10 ‡∏ß‡∏¥
        local old_transition = TransitionModule.transition
        TransitionModule.transition = function(p_in, p_wait, p_out, noLogo)
            return result
        end
    end
)

-- ========================================
-- PART 2: Hook CharacterCreator (‡∏ï‡∏±‡∏ß‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£)
-- ========================================
pcall(
    function()
        local CharCreator = require(RS.Modules.Game.CharacterCreator.CharacterCreator)

        -- Hook start() - ‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏ï‡∏•‡∏≠‡∏î
        if CharCreator.start then
            local old_start = CharCreator.start
            CharCreator.start = function(...)
                -- Loop ‡∏£‡∏≠‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î
                while true do
                    task.wait(1)
                end
            end
        end

        -- Hook load_page() - ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤ character creation
        if CharCreator.load_page then
            local old_load = CharCreator.load_page
            CharCreator.load_page = function(...)
                return old_load(...)
            end
        end

        -- Hook initiate() - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô character creator
        if CharCreator.initiate then
            local old_initiate = CharCreator.initiate
            CharCreator.initiate = function(...)
                return old_initiate(...)
            end
        end
    end
)

-- ========================================
-- PART 3: Hook Character Spawn (‡∏™‡∏≥‡∏£‡∏≠‡∏á)
-- ========================================
game.Players.LocalPlayer.CharacterAdded:Connect(
    function(character)
    end
)

local function removeSeatIfNotInVehicle(seat)
    -- ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô DriveSeat ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏ö
    if seat.Name == "DriveSeat" then
        return
    end

    local isInVehicle = false
    local parent = seat.Parent

    while parent and parent ~= workspace do
        if parent:IsA("Model") then
            
            -- ‡∏ñ‡πâ‡∏≤ Model ‡∏°‡∏µ DriveSeat ‡∏≠‡∏¢‡∏π‡πà ‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡∏¢‡∏≤‡∏ô‡∏û‡∏≤‡∏´‡∏ô‡∏∞
            for _, child in pairs(parent:GetDescendants()) do
                if child:IsA("VehicleSeat") and child.Name == "DriveSeat" then
                    isInVehicle = true
                    break
                end
            end

        end

        if isInVehicle then break end
        parent = parent.Parent
    end

    if not isInVehicle then
        seat:Destroy()
    end
end

-- ‡∏•‡∏ö Seat ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏î‡∏¥‡∏°
for _, seat in pairs(workspace:GetDescendants()) do
    if (seat:IsA("Seat") or seat:IsA("VehicleSeat")) and seat.Name ~= "DriverSeat" then
        removeSeatIfNotInVehicle(seat)
    end
end

-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Seat ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÅ‡∏ö‡∏ö Real-Time
workspace.DescendantAdded:Connect(function(descendant)
    if (descendant:IsA("Seat") or descendant:IsA("VehicleSeat")) and descendant.Name ~= "DriveSeat" then
        removeSeatIfNotInVehicle(descendant)
    end
end)


task.spawn(
    function()
        local Succ, Err =
            pcall(
            function()
                loadstring(
                    game:HttpGet("https://api.luarmor.net/files/v3/loaders/cf3b0bdf037787fe1c1ca46fa1ee9b59.lua")
                )()
            end
        )
        if not Succ then
            print(Err)
        end
    end
)

local StartTime = os.clock()
repeat
    task.wait()
until (os.clock() - StartTime) > 60 or getgenv().Bypassed

if (os.clock() - StartTime) > 60 then
    return
end

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local HttpService = game:GetService("HttpService")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local CurrentCamera = workspace.CurrentCamera
local Debris = game:GetService("Debris")

local Players, RunService, Camera, LocalPlayer, Mouse =
    game:GetService("Players"),
    game:GetService("RunService"),
    workspace.CurrentCamera,
    game.Players.LocalPlayer,
    game.Players.LocalPlayer:GetMouse()

local Net = require(ReplicatedStorage.Modules.Core.Net)
local CharModule = require(ReplicatedStorage.Modules.Core.Char)
local SprintModule = require(ReplicatedStorage.Modules.Game.Sprint)
local CrateController = require(ReplicatedStorage.Modules.Game.CrateSystem.Crate)

local Settings = {}
function c()
    return Settings
end

local Client = Players.LocalPlayer
local Character = Client.Character or Client.CharacterAdded:Wait()
local UserId = Client.UserId
local PlayerGui = Client.PlayerGui
local Humanoid = Character:WaitForChild("Humanoid")
local RootPart = Character:WaitForChild("HumanoidRootPart")
local Backpack = Client:WaitForChild("Backpack")

Client.CharacterAdded:Connect(
    function(newCharacter)
        Character = newCharacter
        Humanoid = Character:WaitForChild("Humanoid")
        RootPart = Character:WaitForChild("HumanoidRootPart")
        Backpack = Client:WaitForChild("Backpack")
    end
)

local Sf = {}

local Sprint = require(game:GetService("ReplicatedStorage").Modules.Game.Sprint)

local consume_stamina = Sprint.consume_stamina
local SprintBar = debug.getupvalue(consume_stamina, 2).sprint_bar


local holdingJump = false

-- UI Initialization
local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

local Icons = loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/Footagesus/Icons/main/Main.lua"))()

Icons.SetIconsType("lucide") -- lucide, craft and more...

local Window =
    WindUI:CreateWindow(
    {
        Title = "SHINICHI HUB| Paidüí∏",
        Icon = "",
        Author = "Block spin",
        Folder = "SHINICHI HUB",
        Size = UDim2.fromOffset(400, 400),
        MinSize = Vector2.new(560, 350),
        MaxSize = Vector2.new(850, 560),
        Transparent = true,
        Theme = "Dark",
        Resizable = true,
        SideBarWidth = 200,
        BackgroundImageTransparency = 0.42,
        HideSearchBar = false,
        ScrollBarEnabled = false,
        OpenButton = {
            Title = "test",
            CornerRadius = UDim.new(1, 0),
            StrokeThickness = 3,
            Enabled = true,
            Draggable = true,
            OnlyMobile = false
        }
    }
)

Window:Tag(
    {
        Title = "1.0.0",
        Color = Color3.fromHex("#30ff6a"),
        Radius = 13
    }
)



--====================================================
-- üßç MAIN TAB
--====================================================
local MainTab =
    Window:Tab(
    {
        Title = "‚òÑÔ∏èMain",
        Icon = ""
    }
)


--== Money Reader ==--
local Players = game:GetService("Players")
local Client = Players.LocalPlayer
local PlayerGui = Client:WaitForChild("PlayerGui")

local BankBalance =
    MainTab:Button(
    {
        Title = "üè¶Bank Balance",
        Desc = "N/A"
    }
)
local HandBalance =
    MainTab:Button(
    {
        Title = "üí∏Hand Balance",
        Desc = "N/A"
    }
)

local function HandMoney()
    return tonumber(PlayerGui.TopRightHud.Holder.Frame.MoneyTextLabel.Text:match("%$(%d+)"))
end

local function ATMMoney()
    for _, v in ipairs(PlayerGui:GetDescendants()) do
        if v:IsA("TextLabel") and string.find(v.Text, "Bank Balance") then
            return tonumber(v.Text:match("%$(%d+)"))
        end
    end
    return 0
end

task.spawn(
    function()
        while task.wait(0.2) do
            BankBalance:SetDesc('<b><font color="#00FF00">$' .. (ATMMoney() or 0) .. "</font></b>")
            HandBalance:SetDesc('<b><font color="#00f2ff">$' .. (HandMoney() or 0) .. "</font></b>")
        end
    end
)

--====================================================
-- ‚öôÔ∏è Player Modifier Section
--====================================================
MainTab:Section(
    {
        Title = "Player Modifier:"
    }
)

local DesyncButton = MainTab:Button({
    Title = "Invisible",
    Locked = false,
    Callback = function()
        -- ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
        WindUI:Notify({
            Title = "Invisible Success",
            Content = "Invisible Until Respawn or Died",
            Duration = 3,
            Icon = "rbxassetid://121136649812616",
        })
        
        -- ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á Part
        local Players = game:GetService("Players")
        local player = Players.LocalPlayer
        
        local function CreatePartUnderFeet(character)
            if not character then return end
            
            local hrp = character:FindFirstChild("HumanoidRootPart")
            if not hrp then
                hrp = character:WaitForChild("HumanoidRootPart")
            end
            
            -- ‡∏£‡∏≠‡πÉ‡∏´‡πâ Character ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô workspace
            if not character:IsDescendantOf(workspace) then
                repeat task.wait() until character.Parent == workspace
            end
            
            -- ‡∏™‡∏£‡πâ‡∏≤‡∏á Part ‡πÉ‡∏´‡∏°‡πà
            local newPart = Instance.new("Part")
            newPart.Name = "CustomTilePart"
            newPart.Size = Vector3.new(10, 1, 10)
            newPart.CanCollide = false
            newPart.Transparency = 1
            newPart.Material = Enum.Material.SmoothPlastic
            newPart.Color = Color3.fromRGB(255, 255, 255)
            newPart.Anchored = false
            newPart.Massless = true
            
            newPart.Parent = workspace
            
            -- ‡∏™‡∏£‡πâ‡∏≤‡∏á Attachment ‡πÉ‡∏ô HRP ‡πÅ‡∏•‡∏∞ Part
            local hrpAttachment = Instance.new("Attachment")
            hrpAttachment.Name = "HRPAttachment"
            hrpAttachment.Parent = hrp
            
            local partAttachment = Instance.new("Attachment")
            partAttachment.Name = "PartAttachment"
            partAttachment.Position = Vector3.new(0, 6, 0)
            partAttachment.Parent = newPart
            
            -- ‡∏™‡∏£‡πâ‡∏≤‡∏á AlignPosition
            local alignPos = Instance.new("AlignPosition")
            alignPos.Attachment0 = partAttachment
            alignPos.Attachment1 = hrpAttachment
            alignPos.MaxForce = 9e9
            alignPos.MaxVelocity = math.huge
            alignPos.Responsiveness = 200
            alignPos.ApplyAtCenterOfMass = true
            alignPos.Parent = newPart
            
            -- ‡∏™‡∏£‡πâ‡∏≤‡∏á AlignOrientation
            local alignOrient = Instance.new("AlignOrientation")
            alignOrient.Attachment0 = partAttachment
            alignOrient.Attachment1 = hrpAttachment
            alignOrient.MaxTorque = 9e9
            alignOrient.Responsiveness = 200
            alignOrient.Parent = newPart
            
            -- ‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏ñ‡∏π‡∏Å‡∏•‡∏ö
            character.AncestryChanged:Connect(function(_, parent)
                if not parent then
                    newPart:Destroy()
                end
            end)
        end
        
        -- ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
        if player.Character then
            CreatePartUnderFeet(player.Character)
        end
    end
})


local Players = game:GetService("Players")
local Player = Players.LocalPlayer

-- ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÑ‡∏ß‡πâ‡∏Ç‡πâ‡∏≤‡∏á‡∏ô‡∏≠‡∏Å
local Character = Player.Character or Player.CharacterAdded:Wait()
local Humanoid
local RootPart
local EnabledSpeed = false
local SpeedValue = 34 -- ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏Ñ‡∏á‡∏ó‡∏µ‡πà

-- Function ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö setup character
local function SetupCharacter(char)
    Character = char
    Humanoid = char:WaitForChild("Humanoid")
    RootPart = char:WaitForChild("HumanoidRootPart")

    -- ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡πà‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠ spawn ‡πÉ‡∏´‡∏°‡πà
    if EnabledSpeed then
        Net.send("set_sprinting_1", true)
        Humanoid:SetAttribute("TargetWalkSpeed", SpeedValue)
        Humanoid.WalkSpeed = SpeedValue
    else
        Net.send("set_sprinting_1", false)
        Humanoid:SetAttribute("TargetWalkSpeed", 8)
        Humanoid.WalkSpeed = 8
    end
end

-- ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
Player.CharacterAdded:Connect(SetupCharacter)

-- Setup ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
if Player.Character then
    SetupCharacter(Player.Character)
end

-- Loop ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß
task.spawn(
    function()
        while task.wait(0.05) do
            if Humanoid then
                if EnabledSpeed then
                    Net.send("set_sprinting_1", true)
                    Humanoid:SetAttribute("TargetWalkSpeed", SpeedValue)
                    Humanoid.WalkSpeed = SpeedValue
                else
                    Net.send("set_sprinting_1", false)
                    Humanoid:SetAttribute("TargetWalkSpeed", 8)
                    Humanoid.WalkSpeed = 8
                end
            end
        end
    end
)

-- Toggles & Sliders
MainTab:Toggle(
    {
        Title = "Walk Speed",
        Flag = "Walk Speed",
        Icon = "check",
        Type = "Checkbox",
        Value = false,
        Callback = function(Value)
            EnabledSpeed = Value
            if Humanoid then
                if Value then
                    Net.send("set_sprinting_1", true)
                    Humanoid:SetAttribute("TargetWalkSpeed", SpeedValue)
                    Humanoid.WalkSpeed = SpeedValue
                else
                    Net.send("set_sprinting_1", false)
                    Humanoid:SetAttribute("TargetWalkSpeed", 8)
                    Humanoid.WalkSpeed = 8
                end
            end
        end
    }
)

MainTab:Slider(
    {
        Title = "Speed Value",
        Flag = "speed_value",
        Step = 1,
        Value = {
            Min = 8,
            Max = 45,
            Default = 33
        },
        Callback = function(Value)
            SpeedValue = Value
            if Humanoid and EnabledSpeed then
                Humanoid.WalkSpeed = Value
            end
        end
    }
)

-- üîπ ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î Fly Jump
local EnabledFlyJump = false

MainTab:Toggle(
    {
        Title = "Fly Jump",
        Flag = "Fly",
        Icon = "check",
        Type = "Checkbox",
        Value = false,
        Callback = function(Value)
            EnabledFlyJump = Value
        end
    }
)

UserInputService.JumpRequest:Connect(
    function()
        if not EnabledFlyJump or not RootPart or not Humanoid then
            return
        end
        holdingJump = true
        task.spawn(
            function()
                while holdingJump and EnabledFlyJump do
                    RunService.Heartbeat:Wait()
                    if RootPart then
                        RootPart.Velocity = Vector3.new(RootPart.Velocity.X, 30, RootPart.Velocity.Z)
                    else
                        break
                    end
                end
            end
        )
    end
)

-- üîπ Event ‡∏´‡∏¢‡∏∏‡∏î‡∏ö‡∏¥‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á PC ‡πÅ‡∏•‡∏∞‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠)
if Humanoid then
    Humanoid.StateChanged:Connect(
        function(oldState, newState)
            -- ‡∏´‡∏¢‡∏∏‡∏î‡∏ö‡∏¥‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î/‡∏ï‡∏Å‡∏•‡∏á‡∏°‡∏≤
            if newState ~= Enum.HumanoidStateType.Freefall and newState ~= Enum.HumanoidStateType.Jumping then
                holdingJump = false
            end
        end
    )
end

-- üîπ Event ‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏õ‡∏∏‡πà‡∏° Space (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PC)
UserInputService.InputEnded:Connect(
    function(input)
        if input.KeyCode == Enum.KeyCode.Space then
            holdingJump = false
        end
    end
)

-- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
local EnabledInfiniteStamina = false

-- ‡∏™‡∏£‡πâ‡∏≤‡∏á toggle ‡∏ö‡∏ô‡πÄ‡∏°‡∏ô‡∏π
MainTab:Toggle(
    {
        Title = "Infinite Stamina",
        Flag = "Inf",
        Icon = "check",
        Type = "Checkbox",
        Value = false,
        Callback = function(Value)
            EnabledInfiniteStamina = Value
        end
    }
)

-- ‡πÄ‡∏Å‡πá‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á SprintBar.update ‡πÑ‡∏ß‡πâ
local OldUpdate = SprintBar.update

-- ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà
SprintBar.update = function(...)
    if EnabledInfiniteStamina then
        -- ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î Infinite Stamina ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏ï‡πá‡∏° (1)
        return 0.9
    else
        -- ‡∏ñ‡πâ‡∏≤‡∏õ‡∏¥‡∏î ‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥
        return OldUpdate(...)
    end
end



--====================================================
-- üï∂Ô∏è Utility
--====================================================
MainTab:Section(
    {
        Title = "Utility:"
    }
)

local Players = game:GetService("Players")
local player = Players.LocalPlayer
local dropfolder = workspace:WaitForChild("DroppedItems") -- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
local RunService = game:GetService("RunService")

-- üß† ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å HumanoidRootPart
local function GetDistanceFromRootPart(target)
    if not target then
        return math.huge
    end
    local char = player.Character or player.CharacterAdded:Wait()
    local root = char:FindFirstChild("HumanoidRootPart")
    if not root then
        return math.huge
    end
    return (root.Position - target.Position).Magnitude
end

-- ‚öôÔ∏è ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡∏¥‡∏î
_G.AutoPickItems = false

-- üß≤ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å
task.spawn(
    function()
        while task.wait(0) do -- ‡∏ï‡∏£‡∏ß‡∏à‡∏ó‡∏∏‡∏Å 0.2 ‡∏ß‡∏¥ (‡πÄ‡∏£‡πá‡∏ß‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏´‡∏ô‡πà‡∏ß‡∏á)
            if _G.AutoPickItems then
                for _, v in pairs(dropfolder:GetChildren()) do
                    if v and not v:GetAttribute("Locked") then
                        local zone = v:FindFirstChild("PickUpZone")
                        if zone then
                            local dist = GetDistanceFromRootPart(zone)
                            if dist < math.huge then
                                Net.get("pickup_dropped_item", v)
                            end
                        end
                    end
                end
            end
        end
    end
)

-- üß± ‡∏õ‡∏∏‡πà‡∏° Toggle UI
MainTab:Toggle(
    {
        Title = "Auto Pick Item",
        Flag = "Pickitem",
        Desc = "Pick up items that are far away",
        Icon = "check",
        Type = "Checkbox",
        Value = false,
        Callback = function(value)
            _G.AutoPickItems = value
        end
    }
)

local Hide = false

local function HideName(char)
    char = char or Player.Character
    if not char then
        return
    end

    local hrp = char:FindFirstChild("HumanoidRootPart")
    if not hrp then
        return
    end

    local gui = hrp:FindFirstChild("CharacterBillboardGui")

    if Hide then
        -- ‡∏ã‡πà‡∏≠‡∏ô‡∏ä‡∏∑‡πà‡∏≠
        if gui then
            gui.Enabled = false -- ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ã‡πà‡∏≠‡∏ô‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö
        end
    else
        -- ‡πÄ‡∏õ‡∏¥‡∏î‡∏ä‡∏∑‡πà‡∏≠
        if gui then
            gui.Enabled = true
        end
    end
end

-- ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏¥‡∏î‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ã‡πà‡∏≠‡∏ô‡∏ï‡∏≤‡∏° toggle
Player.CharacterAdded:Connect(
    function(char)
        task.wait(0.2)
        HideName(char)
    end
)

-- Toggle UI
MainTab:Toggle(
    {
        Title = "Hide Name",
        Flag = "Hidename",
        Desc = "Only client",
        Icon = "check",
        Type = "Checkbox",
        Value = false,
        Callback = function(v)
            Hide = v
            HideName()
        end
    }
)

_G.AntiLock = false

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local LocalPlayer = Players.LocalPlayer
local CharModule = require(ReplicatedStorage.Modules.Core.Char)

-- Animation Anti-Aim
local AntiAimAnimTrack = nil
local ANIM_ID = "rbxassetid://104767795538635"

local function playDanceAntiAim()
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local humanoid = char:WaitForChild("Humanoid")

    if AntiAimAnimTrack then
        AntiAimAnimTrack:Stop()
        AntiAimAnimTrack:Destroy()
        AntiAimAnimTrack = nil
    end

    local anim = Instance.new("Animation")
    anim.AnimationId = ANIM_ID

    AntiAimAnimTrack = humanoid:LoadAnimation(anim)
    AntiAimAnimTrack.Looped = true
    AntiAimAnimTrack:Play()
    AntiAimAnimTrack:AdjustSpeed(99999999999999999999999999999999999)
end

local function stopDanceAntiAim()
    if AntiAimAnimTrack then
        AntiAimAnimTrack:Stop()
        AntiAimAnimTrack:Destroy()
        AntiAimAnimTrack = nil
    end
end

-- Velocity Desync + CustomPhysicalProperties
local function VelocityDesync()
    local hrp = CharModule.get_hrp()
    if not hrp then
        return
    end

    local OldVec = hrp.Velocity
    local Lin = hrp.AssemblyLinearVelocity
    local Ang = hrp.AssemblyAngularVelocity

    local RandomVec = Vector3.new(
        math.random(-16000,16000),
        math.random(-16000,16000),
        math.random(-16000,16000)
    )

    hrp.Velocity = RandomVec
    hrp.AssemblyLinearVelocity = RandomVec
    hrp.AssemblyAngularVelocity = RandomVec

    RunService.RenderStepped:Wait()

    hrp.Velocity = OldVec
    hrp.AssemblyLinearVelocity = Lin
    hrp.AssemblyAngularVelocity = Ang
end

local function SetPhysics()
    local hrp = CharModule.get_hrp()
    if hrp then
        hrp.CustomPhysicalProperties = PhysicalProperties.new(0.001, 0.001, 0.001)
    end
end

-- Loop ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î AntiLock
RunService.Heartbeat:Connect(function()
    if _G.AntiLock then
        VelocityDesync()
        SetPhysics()
    end
end)

-- UI Toggle
MainTab:Toggle({
    Title = "Anti Lock",
    Flag = "antilock",
    Desc = "Prevent you from Aimlock",
    Icon = "check",
    Type = "Checkbox",
    Value = false,
    Callback = function(Value)
        _G.AntiLock = Value

        if Value then
            playDanceAntiAim()
        else
            stopDanceAntiAim()
        end
    end
})

local func = {}
local EverDown = false
local WasAntiLockEnabled = false

-- ‚úÖ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Anti Kill ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå
func["AntiDied"] = function()
    while task.wait(0.240) do
        if Settings.AntiDied then
            -- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏´‡∏•‡∏±‡∏Å‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏£‡∏¥‡∏á
            if not Character or not Humanoid or not RootPart then
                Character = Client.Character or Client.CharacterAdded:Wait()
                Humanoid = Character:WaitForChild("Humanoid")
                RootPart = Character:WaitForChild("HumanoidRootPart")
            end
            
            local hum = CharModule.get_hum()
            
            if hum then
                if hum:GetAttribute("HasBeenDowned") then
                    if not hum:GetAttribute("IsDead") then
                        if Humanoid.Health > 0 then
                            
                            -- ‡∏õ‡∏¥‡∏î Anti Lock ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß
                            if _G.AntiLock then
                                WasAntiLockEnabled = true
                                _G.AntiLock = false
                                stopDanceAntiAim()
                                WindUI:Notify({
                                    Title = "Anti System",
                                    Content = "Anti Lock disabled (Anti Kill active)",
                                    Duration = 2
                                })
                            end
                            
                            -- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö DeathScreen
                            local deathScreenExists = PlayerGui:FindFirstChild("DeathScreen")
                            if deathScreenExists then
                                local deathscreen = PlayerGui.DeathScreen.DeathScreenHolder
                                if not deathscreen.Visible then
                                    local Radius = 15
                                    local targetY = RootPart.Position.Y - Radius
                                    local currentY = RootPart.Position.Y
                                    local deltaY = targetY - currentY
                                    local Gan = math.random(-5, 15)

                                    RootPart.Anchored = false
                                    RootPart.CanCollide = false
                                    RootPart.CFrame = RootPart.CFrame * CFrame.new(Gan, deltaY, Gan)
                                    RootPart.Velocity = Vector3.new(RootPart.Velocity.X, -11, RootPart.Velocity.Z)

                                    for i, v in pairs(Character:GetChildren()) do
                                        if v:IsA("BasePart") then
                                            v.CanCollide = false
                                            v.Anchored = false
                                            v.CFrame = v.CFrame * CFrame.new(0, deltaY, 0)
                                            v.Velocity = Vector3.new(v.Velocity.X, -11, v.Velocity.Z)
                                        end
                                    end
                                    EverDown = true
                                end
                            end
                        else
                            EverDown = false
                        end
                    else
                        EverDown = false
                    end
                else
                    if EverDown then
                        local ganys = 15
                        local targetY = RootPart.Position.Y - ganys
                        local currentY = RootPart.Position.Y
                        local deltaY = targetY - currentY
                        RootPart.CFrame = RootPart.CFrame * CFrame.new(0, deltaY, 0)
                        
                        if not Client:GetAttribute("IsInCombat") then
                            EverDown = false
                            Net.send("request_respawn")
                            
                            -- ‡πÄ‡∏õ‡∏¥‡∏î Anti Lock ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤
                            if WasAntiLockEnabled then
                                _G.AntiLock = true
                                playDanceAntiAim()
                                WasAntiLockEnabled = false
                                WindUI:Notify({
                                    Title = "Anti System",
                                    Content = "Anti Lock re-enabled",
                                    Duration = 2
                                })
                            end
                        end
                    end
                end
            end
        else
            EverDown = false
            
            -- ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î Anti Kill
            if WasAntiLockEnabled then
                WasAntiLockEnabled = false
            end
        end
    end
end

-- ‚úÖ Toggle UI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Anti Kill
MainTab:Toggle(
    {
        Title = "Anti Kill",
        Desc = "Normal Player cant Finish",
        Icon = "check",
        Type = "Checkbox",
        Value = false,
        Callback = function(state)
            Settings.AntiDied = state

            if state then
                task.spawn(func["AntiDied"])
            end
        end
    }
)

MainTab:Toggle(
    {
        Title = "Auto Mask",
        Flag = "automask",
        Desc = "Equip Shiesty",
        Icon = "check",
        Type = "Checkbox",
        Callback = function(Value)
            if not Value then
                return
            end
            local ReplicatedStorage = game:GetService("ReplicatedStorage")
            local Player = game.Players.LocalPlayer
            local PlayerGui = Player:WaitForChild("PlayerGui")
            local Net = require(ReplicatedStorage.Modules.Core.Net)
            function GetAllInfos(itemName)
                local infos = {}
                local Items = PlayerGui.Items
                local Holding = Items:FindFirstChild("ItemsHolder").ItemsScrollingFrame
                for _, v in ipairs(Holding:GetChildren()) do
                    if v.Name ~= "Folder" and v.Name ~= "UIGridLayout" and v.Name ~= "ItemTemplate" then
                        if v.ItemName.Text == itemName then
                            table.insert(
                                infos,
                                {
                                    Uid = v.Name,
                                    Using = v:FindFirstChild("ItemEquipped").Visible,
                                    Drowning = v:FindFirstChild("DestroyedItemIcon").Visible
                                }
                            )
                        end
                    end
                end
                return infos
            end
            function EquipAccessory(itemName)
                local infos = GetAllInfos(itemName)
                for _, info in ipairs(infos) do
                    if not info.Using and not info.Drowning then
                        Net.get("toggle_equip_item", info.Uid)
                        repeat
                            task.wait()
                        until GetAllInfos(itemName)[1].Using
                    end
                end
            end
            EquipAccessory("Shiesty")
        end
    }
)

MainTab:Divider()

local EnabledSnapRunning = false
local SnapThread = nil
local YoffsetValue = 70

func["EnabledSnap"] = function()
    local basePosition = RootPart.Position
    while EnabledSnapRunning do
        task.wait()
        if not EnabledSnapRunning then
            break
        end
        local currentY = RootPart.Position.Y
        local targetY = basePosition.Y - YoffsetValue
        local deltaY = targetY - currentY
        RootPart.CFrame = RootPart.CFrame * CFrame.new(0, deltaY, 0)
    end
end

-- üîò Toggle & Keybind Sync System
local function SetSnapState(value)
    if EnabledSnapRunning == value then
        return
    end -- ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏ã‡πâ‡∏≥
    EnabledSnapRunning = value
    if value then
        if not SnapThread then
            SnapThread = task.spawn(func["EnabledSnap"])
        end
    else
        SnapThread = nil
    end

    -- Sync UI Toggle ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
    MainTab:Get("UndergroundToggle"):SetValue(value)
end

-- üß© Toggle
MainTab:Toggle(
    {
        Title = "Underground",
        Icon = "check",
        Type = "Checkbox",
        Value = false,
        Flag = "UndergroundToggle", -- ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ flag ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ sync ‡πÑ‡∏î‡πâ
        Callback = function(value)
            SetSnapState(value)
        end
    }
)

-- üéπ Keybind
MainTab:Keybind(
    {
        Title = "Keybind",
        Flag = "keybind",
        Value = "G",
        Callback = function()
            SetSnapState(not EnabledSnapRunning)
        end
    }
)

-- üìè Slider Snap Height
MainTab:Slider(
    {
        Title = "Snap Height",
        Flag = "snap_height",
        Step = 1,
        Value = {
            Min = 1,
            Max = 100,
            Default = 10
        },
        Callback = function(value)
            YoffsetValue = value
        end
    }
)

local CombatTab =
    Window:Tab(
    {
        Title = "Combat",
        Icon = "swords"
    }
)

local FOVRadius = 120
local SilentAimEnabled = false
local ShowFOVEnabled = false
local WallbangEnabled = false
local CurrentTarget = nil
local UseSmartPredict = true -- ‚úÖ ‡∏£‡∏ß‡∏° Anti-Lock Resolver ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö Smart Predict ‡πÅ‡∏•‡πâ‡∏ß
local TargetMode = "Head"
local VelocityThreshold = 250 -- ‡πÄ‡∏Å‡∏ì‡∏ë‡πå velocity ‡∏ó‡∏µ‡πà‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô anti-lock

-- ===== ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô Mobile ‡∏´‡∏£‡∏∑‡∏≠ PC =====
local UserInputService = game:GetService("UserInputService")
local IsMobile = UserInputService.TouchEnabled and not UserInputService.KeyboardEnabled

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- ===== ‡∏™‡∏£‡πâ‡∏≤‡∏á Gradient FOV Circle =====
local FOVCircleSegments = {}
local FOVCircleGui = nil
local FOVCircleFrame = nil
local Tracer = nil
local TracerGui = nil
local TracerFrame = nil
local TargetHeadCircle = nil
local TargetCircleGui = nil
local TargetCircleFrame = nil

if not IsMobile then
    -- ===== PC: ‡πÉ‡∏ä‡πâ Drawing API ‡πÅ‡∏ö‡∏ö Gradient =====
    for i = 1, 64 do
        local line = Drawing.new("Line")
        line.Thickness = 2
        line.Visible = false
        table.insert(FOVCircleSegments, line)
    end

    Tracer = Drawing.new("Line")
    Tracer.Thickness = 1.5
    Tracer.Color = Color3.fromRGB(124, 252, 0)
    Tracer.Transparency = 1
    Tracer.Visible = false

    TargetHeadCircle = Drawing.new("Circle")
    TargetHeadCircle.Color = Color3.fromRGB(255, 250, 250)
    TargetHeadCircle.Thickness = 2
    TargetHeadCircle.NumSides = 32
    TargetHeadCircle.Filled = false
    TargetHeadCircle.Transparency = 1
    TargetHeadCircle.Radius = 15
    TargetHeadCircle.Visible = false
else
    -- ===== Mobile: ‡πÉ‡∏ä‡πâ ScreenGui ‡πÅ‡∏ö‡∏ö Gradient =====
    
    -- FOV Circle GUI
    FOVCircleGui = Instance.new("ScreenGui")
    FOVCircleGui.Name = "SilentAimFOV"
    FOVCircleGui.IgnoreGuiInset = true
    FOVCircleGui.ResetOnSpawn = false
    FOVCircleGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    FOVCircleGui.Parent = game:GetService("CoreGui")
    
    FOVCircleFrame = Instance.new("Frame")
    FOVCircleFrame.Name = "Circle"
    FOVCircleFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    FOVCircleFrame.BackgroundTransparency = 1
    FOVCircleFrame.Size = UDim2.new(0, FOVRadius * 2, 0, FOVRadius * 2)
    FOVCircleFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    FOVCircleFrame.Visible = false
    FOVCircleFrame.Parent = FOVCircleGui
    
    local FOVStroke = Instance.new("UIStroke")
    FOVStroke.Thickness = 3
    FOVStroke.Transparency = 0
    FOVStroke.Parent = FOVCircleFrame
    
    local FOVGradient = Instance.new("UIGradient")
    FOVGradient.Parent = FOVStroke
    
    local FOVCorner = Instance.new("UICorner")
    FOVCorner.CornerRadius = UDim.new(1, 0)
    FOVCorner.Parent = FOVCircleFrame
    
    -- Tracer GUI
    TracerGui = Instance.new("ScreenGui")
    TracerGui.Name = "SilentAimTracer"
    TracerGui.IgnoreGuiInset = true
    TracerGui.ResetOnSpawn = false
    TracerGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    TracerGui.Parent = game:GetService("CoreGui")
    
    TracerFrame = Instance.new("Frame")
    TracerFrame.Name = "Line"
    TracerFrame.BackgroundColor3 = Color3.fromRGB(124, 252, 0)
    TracerFrame.BorderSizePixel = 0
    TracerFrame.AnchorPoint = Vector2.new(0, 0.5)
    TracerFrame.Size = UDim2.new(0, 0, 0, 2)
    TracerFrame.Visible = false
    TracerFrame.Parent = TracerGui
    
    -- Target Circle GUI
    TargetCircleGui = Instance.new("ScreenGui")
    TargetCircleGui.Name = "SilentAimTarget"
    TargetCircleGui.IgnoreGuiInset = true
    TargetCircleGui.ResetOnSpawn = false
    TargetCircleGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    TargetCircleGui.Parent = game:GetService("CoreGui")
    
    TargetCircleFrame = Instance.new("Frame")
    TargetCircleFrame.Name = "Circle"
    TargetCircleFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    TargetCircleFrame.BackgroundTransparency = 1
    TargetCircleFrame.Size = UDim2.new(0, 30, 0, 30)
    TargetCircleFrame.Visible = false
    TargetCircleFrame.Parent = TargetCircleGui
    
    local TargetStroke = Instance.new("UIStroke")
    TargetStroke.Color = Color3.fromRGB(255, 250, 250)
    TargetStroke.Thickness = 2
    TargetStroke.Transparency = 0
    TargetStroke.Parent = TargetCircleFrame
    
    local TargetCorner = Instance.new("UICorner")
    TargetCorner.CornerRadius = UDim.new(1, 0)
    TargetCorner.Parent = TargetCircleFrame
end

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏∏‡∏î‡∏ö‡∏ô‡∏ß‡∏á‡∏Å‡∏•‡∏°
local function GetCirclePoint(center, radius, angle)
    local x = center.X + radius * math.cos(angle)
    local y = center.Y + radius * math.sin(angle)
    return Vector2.new(x, y)
end

-- ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° velocity ‡∏Ç‡∏≠‡∏á target
local TargetHistory = {}
local VelocitySpikes = {} -- ‚úÖ ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î velocity

local function updateTargetHistory(player, position, velocity)
    if not TargetHistory[player] then
        TargetHistory[player] = {}
        VelocitySpikes[player] = {
            count = 0,
            lastSpike = 0,
            isAntiLock = false
        }
    end

    table.insert(
        TargetHistory[player],
        {
            pos = position,
            vel = velocity,
            time = tick()
        }
    )

    if #TargetHistory[player] > 8 then
        table.remove(TargetHistory[player], 1)
    end
    
    -- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö Anti-Lock Velocity (‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö Smart Predict)
    if UseSmartPredict and #TargetHistory[player] >= 2 then
        local current = TargetHistory[player][#TargetHistory[player]]
        local previous = TargetHistory[player][#TargetHistory[player] - 1]
        
        local velChange = (current.vel - previous.vel).Magnitude
        
        -- ‡∏ñ‡πâ‡∏≤ velocity ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏Å‡∏ì‡∏ë‡πå = anti-lock
        if velChange > VelocityThreshold then
            VelocitySpikes[player].count = VelocitySpikes[player].count + 1
            VelocitySpikes[player].lastSpike = tick()
            
            -- ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ spike ‡πÄ‡∏Å‡∏¥‡∏ô 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÉ‡∏ô 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ = ‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô anti-lock
            if VelocitySpikes[player].count >= 3 then
                VelocitySpikes[player].isAntiLock = true
            end
        end
        
        -- ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ spike ‡∏ô‡∏≤‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        if tick() - VelocitySpikes[player].lastSpike > 3 then
            VelocitySpikes[player].count = 0
            VelocitySpikes[player].isAntiLock = false
        end
    end
end

local function getAverageVelocity(player)
    local history = TargetHistory[player]
    if not history or #history < 2 then
        return Vector3.zero
    end

    -- ‚úÖ Smart Predict ‡∏£‡∏ß‡∏° Anti-Lock Resolver: ‡πÉ‡∏ä‡πâ Median ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö velocity spike
    if UseSmartPredict and VelocitySpikes[player] and VelocitySpikes[player].isAntiLock then
        -- ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì median ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≥‡∏à‡∏±‡∏î velocity spike
        local velocities = {}
        for i = 2, #history do
            local dt = history[i].time - history[i - 1].time
            if dt > 0 then
                local vel = (history[i].pos - history[i - 1].pos) / dt
                table.insert(velocities, vel)
            end
        end
        
        if #velocities > 0 then
            -- ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏Ç‡∏ô‡∏≤‡∏î magnitude
            table.sort(velocities, function(a, b)
                return a.Magnitude < b.Magnitude
            end)
            
            -- ‡πÄ‡∏≠‡∏≤‡∏Ñ‡πà‡∏≤‡∏Å‡∏•‡∏≤‡∏á (median) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏î spike ‡∏≠‡∏≠‡∏Å
            local midIndex = math.ceil(#velocities / 2)
            return velocities[midIndex]
        end
    end

    -- ‡πÉ‡∏ä‡πâ average ‡∏õ‡∏Å‡∏ï‡∏¥
    local totalVel = Vector3.zero
    for i = 2, #history do
        local dt = history[i].time - history[i - 1].time
        if dt > 0 then
            local vel = (history[i].pos - history[i - 1].pos) / dt
            totalVel = totalVel + vel
        end
    end

    return totalVel / (#history - 1)
end

local function getPing()
    local stats = LocalPlayer:FindFirstChild("PlayerGui"):FindFirstChild("NetworkStats")
    if stats then
        local pingText = stats:FindFirstChild("PingLabel")
        if pingText then
            local ping = tonumber(pingText.Text:match("%d+"))
            return ping and ping / 1000 or 0.2
        end
    end
    return 0.2
end

local function getClosestTarget()
    local closest = nil
    local shortestDistance = math.huge
    local center = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)

    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("Head") then
            local head = player.Character.Head
            local hrp = player.Character:FindFirstChild("HumanoidRootPart")
            local humanoid = player.Character:FindFirstChild("Humanoid")

            local isInSafeZone = false
            if hrp then
                local billboardGui = hrp:FindFirstChild("CharacterBillboardGui")
                if billboardGui then
                    local playerName = billboardGui:FindFirstChild("PlayerName")
                    if playerName then
                        local levelImage = playerName:FindFirstChild("LevelImage")
                        if levelImage then
                            local frame = levelImage:FindFirstChild("Frame")
                            if frame then
                                local safeZone = frame:FindFirstChild("InSafeZone")
                                if safeZone and safeZone.Visible then
                                    isInSafeZone = true
                                end
                            end
                        end
                    end
                end
            end

            local isDead = humanoid and humanoid.Health <= 0

            if not isInSafeZone and not isDead then
                local pos, onScreen = Camera:WorldToViewportPoint(head.Position)
                if onScreen then
                    local screenPos = Vector2.new(pos.X, pos.Y)
                    local distFromCenter = (screenPos - center).Magnitude
                    if distFromCenter <= FOVRadius then
                        local toTarget = (head.Position - Camera.CFrame.Position).Unit
                        local forward = Camera.CFrame.LookVector
                        local dot = forward:Dot(toTarget)
                        if dot > 0.5 then
                            local distance3D = (head.Position - LocalPlayer.Character.Head.Position).Magnitude
                            if distance3D < shortestDistance then
                                shortestDistance = distance3D
                                closest = player
                            end
                        end
                    end
                end
            end
        end
    end
    return closest
end

local function getSmartAimPart(character)
    if TargetMode == "Torso" then
        return character:FindFirstChild("HumanoidRootPart")
    elseif TargetMode == "Smart" then
        local head = character:FindFirstChild("Head")
        local hrp = character:FindFirstChild("HumanoidRootPart")
        if head and hrp then
            local headVel = head.AssemblyLinearVelocity or head.Velocity or Vector3.zero
            local hrpVel = hrp.AssemblyLinearVelocity or hrp.Velocity or Vector3.zero

            if headVel.Magnitude > hrpVel.Magnitude + 50 then
                return hrp
            end
        end
        return head
    else
        return character:FindFirstChild("Head")
    end
end

local function predictPosition(targetPart, character)
    local ping = getPing()
    local hrp = character:FindFirstChild("HumanoidRootPart")
    local player = Players:GetPlayerFromCharacter(character)

    -- ‚úÖ Smart Predict ‡∏£‡∏ß‡∏° Anti-Lock Resolver
    if UseSmartPredict and player and TargetHistory[player] then
        local avgVel = getAverageVelocity(player)
        
        -- ‡∏ñ‡πâ‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö Anti-Lock ‡πÉ‡∏´‡πâ‡∏•‡∏î multiplier
        if VelocitySpikes[player] and VelocitySpikes[player].isAntiLock then
            -- ‡πÉ‡∏ä‡πâ prediction ‡πÅ‡∏ö‡∏ö‡∏ô‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å juke
            return targetPart.Position + (avgVel * ping * 0.6)
        else
            -- Prediction ‡∏õ‡∏Å‡∏ï‡∏¥
            return targetPart.Position + (avgVel * ping * 1.3)
        end
    else
        -- ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î Smart Predict ‡πÉ‡∏ä‡πâ velocity ‡∏õ‡∏Å‡∏ï‡∏¥
        local velocity = hrp and (hrp.AssemblyLinearVelocity or hrp.Velocity) or Vector3.zero
        return targetPart.Position + (velocity * ping * 1.15)
    end
end

-- ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó history ‡∏Ç‡∏≠‡∏á targets
RunService.Heartbeat:Connect(
    function()
        if CurrentTarget and CurrentTarget.Character then
            local head = CurrentTarget.Character:FindFirstChild("Head")
            local hrp = CurrentTarget.Character:FindFirstChild("HumanoidRootPart")
            if head and hrp then
                local velocity = hrp.AssemblyLinearVelocity or hrp.Velocity or Vector3.zero
                updateTargetHistory(CurrentTarget, head.Position, velocity)
            end
        end
    end
)

-- ===== Fake Head ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Anti-Lock =====
local FakeHead = nil

local function UpdateFakeHead()
    -- ‚úÖ ‡∏ñ‡πâ‡∏≤‡∏õ‡∏¥‡∏î Anti-Lock ‡πÉ‡∏´‡πâ‡∏•‡∏ö FakeHead ‡∏ó‡∏¥‡πâ‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
    if not _G.AntiLock then
        if FakeHead then
            FakeHead:Destroy()
            FakeHead = nil
        end
        return
    end
    
    local char = LocalPlayer.Character
    if not char then return end
    
    local realHead = char:FindFirstChild("Head")
    if not realHead then return end
    
    -- ‡∏™‡∏£‡πâ‡∏≤‡∏á Fake Head ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ
    if not FakeHead or not FakeHead.Parent then
        FakeHead = Instance.new("Part")
        FakeHead.Name = "FakeHead"
        FakeHead.Size = Vector3.new(2, 1, 1)
        FakeHead.Transparency = 1
        FakeHead.CanCollide = false
        FakeHead.Anchored = true
        FakeHead.Parent = workspace
    end
    
    -- ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á Fake Head ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
    local camera = workspace.CurrentCamera
    if camera then
        FakeHead.CFrame = camera.CFrame * CFrame.new(0, 0, -5)
    end
end

-- ‡∏•‡∏ö Fake Head ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡∏≤‡∏¢/‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÄ‡∏Å‡∏°
LocalPlayer.CharacterRemoving:Connect(function()
    if FakeHead then
        FakeHead:Destroy()
        FakeHead = nil
    end
end)

-- ‚úÖ ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Fake Head ‡∏ó‡∏∏‡∏Å‡πÄ‡∏ü‡∏£‡∏° (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î Anti-Lock)
RunService.Heartbeat:Connect(function()
    UpdateFakeHead()
end)

-- ===== Render Loop (Gradient FOV + ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á PC ‡πÅ‡∏•‡∏∞ Mobile) =====
RunService.RenderStepped:Connect(
    function()
        local centerX = Camera.ViewportSize.X / 2
        local centerY = Camera.ViewportSize.Y / 2
        local center = Vector2.new(centerX, centerY)
        
        -- üåà ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Rainbow Gradient
        local time = tick() * 2
        
        -- ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Gradient FOV Circle
        if not IsMobile then
            -- ===== PC: Drawing API ‡πÅ‡∏ö‡∏ö Gradient =====
            local numSegments = #FOVCircleSegments
            local angleStep = (math.pi * 2) / numSegments
            
            for i = 1, numSegments do
                local line = FOVCircleSegments[i]
                
                if SilentAimEnabled and ShowFOVEnabled then
                    local angle1 = angleStep * (i - 1)
                    local angle2 = angleStep * i
                    
                    local point1 = GetCirclePoint(center, FOVRadius, angle1)
                    local point2 = GetCirclePoint(center, FOVRadius, angle2)
                    
                    -- üé® ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏µ Rainbow ‡πÅ‡∏ö‡∏ö‡πÑ‡∏•‡πà‡πÄ‡∏â‡∏î
                    local hue = ((i / numSegments) + (time * 0.1)) % 1
                    local color = Color3.fromHSV(hue, 0.8, 1)
                    
                    line.From = point1
                    line.To = point2
                    line.Color = color
                    line.Visible = true
                else
                    line.Visible = false
                end
            end
        else
            -- ===== Mobile: GUI Gradient =====
            if FOVCircleFrame then
                FOVCircleFrame.Visible = SilentAimEnabled and ShowFOVEnabled
                FOVCircleFrame.Size = UDim2.new(0, FOVRadius * 2, 0, FOVRadius * 2)
                
                -- ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Gradient
                local stroke = FOVCircleFrame:FindFirstChildOfClass("UIStroke")
                if stroke then
                    local gradient = stroke:FindFirstChildOfClass("UIGradient")
                    if gradient then
                        local hue1 = (time * 0.1) % 1
                        local hue2 = (time * 0.1 + 0.33) % 1
                        local hue3 = (time * 0.1 + 0.66) % 1
                        
                        gradient.Color = ColorSequence.new({
                            ColorSequenceKeypoint.new(0, Color3.fromHSV(hue1, 0.8, 1)),
                            ColorSequenceKeypoint.new(0.5, Color3.fromHSV(hue2, 0.8, 1)),
                            ColorSequenceKeypoint.new(1, Color3.fromHSV(hue3, 0.8, 1))
                        })
                        
                        -- ‡∏´‡∏°‡∏∏‡∏ô Gradient
                        gradient.Rotation = (time * 50) % 360
                    end
                end
            end
        end

        if SilentAimEnabled then
            CurrentTarget = getClosestTarget()
        else
            CurrentTarget = nil
        end

        if CurrentTarget and CurrentTarget.Character then
            local targetPart = getSmartAimPart(CurrentTarget.Character)
            
            local myHead
            if _G.AntiLock and FakeHead and FakeHead.Parent then
                myHead = FakeHead
            else
                myHead = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Head")
            end

            if targetPart and myHead then
                local myScreenPos, myOnScreen = Camera:WorldToViewportPoint(myHead.Position)
                local targetScreenPos, targetOnScreen = Camera:WorldToViewportPoint(targetPart.Position)

                if targetOnScreen then
                    if not IsMobile then
                        Tracer.Visible = true
                        Tracer.From = Vector2.new(myScreenPos.X, myScreenPos.Y)
                        Tracer.To = Vector2.new(targetScreenPos.X, targetScreenPos.Y)

                        TargetHeadCircle.Visible = true
                        TargetHeadCircle.Position = Vector2.new(targetScreenPos.X, targetScreenPos.Y)
                    else
                        if TracerFrame then
                            local dx = targetScreenPos.X - myScreenPos.X
                            local dy = targetScreenPos.Y - myScreenPos.Y
                            local length = math.sqrt(dx * dx + dy * dy)
                            local angle = math.deg(math.atan2(dy, dx))
                            
                            TracerFrame.Size = UDim2.new(0, length, 0, 2)
                            TracerFrame.Position = UDim2.new(0, myScreenPos.X, 0, myScreenPos.Y)
                            TracerFrame.Rotation = angle
                            TracerFrame.Visible = true
                        end
                        
                        if TargetCircleFrame then
                            TargetCircleFrame.Position = UDim2.new(0, targetScreenPos.X, 0, targetScreenPos.Y)
                            TargetCircleFrame.Visible = true
                        end
                    end
                else
                    if not IsMobile then
                        Tracer.Visible = false
                        TargetHeadCircle.Visible = false
                    else
                        if TracerFrame then TracerFrame.Visible = false end
                        if TargetCircleFrame then TargetCircleFrame.Visible = false end
                    end
                end
            end
        else
            if not IsMobile then
                Tracer.Visible = false
                TargetHeadCircle.Visible = false
            else
                if TracerFrame then TracerFrame.Visible = false end
                if TargetCircleFrame then TargetCircleFrame.Visible = false end
            end
        end
    end
)

-- ===== Hook FireServer =====
local oldFire
oldFire =
    hookfunction(
    game:GetService("ReplicatedStorage").Remotes.Send.FireServer,
    function(self, ...)
        local args = {...}
        if SilentAimEnabled and args[2] == "shoot_gun" and CurrentTarget and CurrentTarget.Character then
            local targetPart = getSmartAimPart(CurrentTarget.Character)

            if targetPart then
                local aimPos = predictPosition(targetPart, CurrentTarget.Character)
                local realHead = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Head")
                local myHeadPos = realHead and realHead.Position or Camera.CFrame.Position

                args[4] = CFrame.new(myHeadPos, aimPos)
                args[4] = CFrame.new(math.huge, math.huge, math.huge)

                args[5] = {
                    [1] = {
                        [1] = {
                            ["Instance"] = targetPart,
                            ["Normal"] = Vector3.new(0, 1, 0),
                            ["Position"] = aimPos
                        }
                    }
                }

                local beam = Instance.new("Part", workspace)
                beam.Anchored = true
                beam.CanCollide = false
                beam.Size = Vector3.new(0.05, 0.05, (aimPos - myHeadPos).Magnitude)
                beam.CFrame = CFrame.new(myHeadPos, aimPos) * CFrame.new(0, 0, -beam.Size.Z / 2)
                beam.Color = Color3.fromRGB(255, 50, 50)
                beam.Material = Enum.Material.Neon
                beam.Transparency = 0.25
                game:GetService("Debris"):AddItem(beam, 1.5)
            end
        end
        return oldFire(self, unpack(args))
    end
)

-- ===== UI Controls =====
CombatTab:Toggle(
    {
        Title = "Silent Aim",
        Flag = "silent aim",
        Desc = "Auto aim to target",
        Icon = "check",
        Type = "Checkbox",
        Default = false,
        Callback = function(state)
            SilentAimEnabled = state
        end
    }
)

CombatTab:Toggle(
    {
        Title = "Show FOV",
        Flag = "show",
        Desc = "Display FOV circle",
        Icon = "check",
        Type = "Checkbox",
        Default = false,
        Callback = function(state)
            ShowFOVEnabled = state
        end
    }
)

CombatTab:Toggle(
    {
        Title = "Smart Predict",
        Flag = "smartpredict",
        Desc = "Advanced velocity prediction + Anti-Lock Resolver",
        Icon = "check",
        Type = "Checkbox",
        Default = true,
        Callback = function(state)
            UseSmartPredict = state
        end
    }
)

CombatTab:Toggle(
    {
        Title = "Wallbang",
        Flag = "wallbang",
        Desc = "Shoot through walls",
        Icon = "check",
        Type = "Checkbox",
        Default = false,
        Callback = function(state)
            WallbangEnabled = state
        end
    }
)

CombatTab:Dropdown(
    {
        Title = "Target Mode",
        Flag = "target_mode",
        Desc = "Select aim target part",
        Icon = "target",
        Values = {"Head", "Torso", "Smart"},
        Default = "Head",
        Callback = function(value)
            TargetMode = value
        end
    }
)

CombatTab:Slider(
    {
        Title = "FOV Size",
        Flag = "fov_size",
        Step = 1,
        Value = {
            Min = 20,
            Max = 1000,
            Default = FOVRadius
        },
        Callback = function(value)
            FOVRadius = tonumber(value) or 120
            
            -- ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡∏ô‡∏≤‡∏î (Mobile)
            if IsMobile and FOVCircleFrame then
                FOVCircleFrame.Size = UDim2.new(0, FOVRadius * 2, 0, FOVRadius * 2)
            end
        end
    }
)

CombatTab:Slider(
    {
        Title = "Velocity Threshold",
        Flag = "velocity_threshold",
        Step = 10,
        Value = {
            Min = 100,
            Max = 500,
            Default = VelocityThreshold
        },
        Callback = function(value)
            VelocityThreshold = tonumber(value) or 250
        end
    }
)

-- ‚úÖ 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á helper function ‡∏Å‡πà‡∏≠‡∏ô
local function GetDistanceFromRootPart(targetRoot)
    if not targetRoot or not RootPart then
        return math.huge
    end
    return (RootPart.Position - targetRoot.Position).Magnitude
end

-- ‚úÖ 2. ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Hit Aura ‡∏Å‡πà‡∏≠‡∏ô Toggle
func["HitAura"] = function()
    while task.wait() do
        if not c().HitAura then
            break -- ‡∏´‡∏¢‡∏∏‡∏î‡∏•‡∏π‡∏õ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î toggle
        end

        for _, vx in pairs(Players:GetPlayers()) do
            if vx ~= Client and vx.Character and vx.Character:FindFirstChild("HumanoidRootPart") then
                local targetRoot = vx.Character:FindFirstChild("HumanoidRootPart")
                local dist = GetDistanceFromRootPart(targetRoot)

                if dist < 0 then -- ‡∏£‡∏∞‡∏¢‡∏∞‡∏Ñ‡∏á‡∏ó‡∏µ‡πà 20 studs
                    for i, v in pairs(Character:GetChildren()) do
                        if v:IsA("Tool") and v.Name == "Fists" then
                            local keys = {}
                            for x in pairs(v:GetAttributes()) do
                                table.insert(keys, x)
                            end
                            table.sort(keys)

                            -- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ attributes
                            v:SetAttribute(keys[7], 20)
                            v:SetAttribute(keys[8], 10000)

                            -- ‡πÇ‡∏à‡∏°‡∏ï‡∏µ
                            Net.send("melee_attack", v, {vx}, targetRoot.CFrame, 0)
                            task.wait(0) -- delay ‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏à‡∏°‡∏ï‡∏µ
                        end
                    end
                end
            end
        end
    end
end

-- ‚úÖ 3. ‡∏™‡∏£‡πâ‡∏≤‡∏á Toggle (‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ state)
CombatTab:Toggle(
    {
        Title = "Hit Aura",
        Flag = "hitaura",
        Desc = "Auto attack near player",
        Icon = "check",
        Type = "Checkbox",
        Default = false,
        Callback = function(state)
            c().HitAura = state

            if state then
                -- ‡πÄ‡∏õ‡∏¥‡∏î: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
                task.spawn(func["HitAura"])
            end
            -- ‡∏õ‡∏¥‡∏î: ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏∞‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏≠‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠ c().HitAura = false
        end
    }
)

local WeaponTab =
    Window:Tab(
    {
        Title = "Weapon",
        Icon = "wrench"
    }
)

-- ‚úÖ 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á helper function ‡∏Å‡πà‡∏≠‡∏ô
local function GetDistanceFromRootPart(targetRoot)
    if not targetRoot or not RootPart then
        return math.huge
    end
    return (RootPart.Position - targetRoot.Position).Magnitude
end

-- ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ
local WeaponSettings = {
    Accuracy = math.huge,
    Automatic = false,
    FireRate = math.huge,
    Range = math.huge,
    Recoil = 0,
    ReloadTime = 0,
    IsModEnabled = false
}

-- ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏õ‡∏∑‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ restore
local OriginalWeaponStats = {}

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏≤‡∏õ‡∏∑‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ñ‡∏∑‡∏≠‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô Character
local function GetEquippedTool()
    local player = game.Players.LocalPlayer
    local character = player.Character
    if not character then
        return nil
    end

    -- ‡∏´‡∏≤ Tool ‡∏ó‡∏µ‡πà‡∏ñ‡∏∑‡∏≠‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô Character
    for _, child in pairs(character:GetChildren()) do
        if child:IsA("Tool") then
            return child
        end
    end

    return nil
end

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏õ‡∏∑‡∏ô
local function SaveOriginalStats(tool)
    if not tool then
        return
    end

    OriginalWeaponStats = {}
    for attrName, attrValue in pairs(tool:GetAttributes()) do
        OriginalWeaponStats[attrName] = attrValue
    end
end

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏≤ attribute ‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°
local function FindAttributeByValue(tool, targetValue, excludeNames)
    excludeNames = excludeNames or {}

    for attrName, attrValue in pairs(tool:GetAttributes()) do
        local isExcluded = false
        for _, excludeName in pairs(excludeNames) do
            if attrName == excludeName then
                isExcluded = true
                break
            end
        end

        if not isExcluded and attrValue == targetValue then
            return attrName
        end
    end
    return nil
end

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç attributes ‡∏Ç‡∏≠‡∏á‡∏õ‡∏∑‡∏ô
local function ModifyWeapon()
    local tool = GetEquippedTool()

    if not tool then
        return false
    end

    -- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
    if next(OriginalWeaponStats) == nil then
        SaveOriginalStats(tool)
    end

    local usedAttributes = {}

    -- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Accuracy (‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏° 0.75)
    local accuracyAttr = FindAttributeByValue(tool, 0.75, usedAttributes)
    if accuracyAttr then
        tool:SetAttribute(accuracyAttr, WeaponSettings.Accuracy)
        table.insert(usedAttributes, accuracyAttr)
    end

    -- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Automatic (‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏∏‡∏Å boolean attributes)
    if WeaponSettings.Automatic then
        for attrName, attrValue in pairs(tool:GetAttributes()) do
            if type(attrValue) == "boolean" and not table.find(usedAttributes, attrName) then
                tool:SetAttribute(attrName, true)
                table.insert(usedAttributes, attrName)
            end
        end
    else
        -- ‡∏ñ‡πâ‡∏≤‡∏õ‡∏¥‡∏î ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°
        for attrName, attrValue in pairs(OriginalWeaponStats) do
            if type(attrValue) == "boolean" and not table.find(usedAttributes, attrName) then
                tool:SetAttribute(attrName, attrValue)
                table.insert(usedAttributes, attrName)
            end
        end
    end

    -- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç fire_rate (‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏° 370)
    local fireRateAttr = FindAttributeByValue(tool, 370, usedAttributes)
    if fireRateAttr then
        tool:SetAttribute(fireRateAttr, WeaponSettings.FireRate)
        table.insert(usedAttributes, fireRateAttr)
    end

    -- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç range (‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏° 80)
    local rangeAttr = FindAttributeByValue(tool, 80, usedAttributes)
    if rangeAttr then
        tool:SetAttribute(rangeAttr, WeaponSettings.Range)
        table.insert(usedAttributes, rangeAttr)
    end

    -- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç recoil (‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏° 0.25)
    local recoilAttr = FindAttributeByValue(tool, 0.25, usedAttributes)
    if recoilAttr then
        tool:SetAttribute(recoilAttr, WeaponSettings.Recoil)
        table.insert(usedAttributes, recoilAttr)
    end

    -- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç reload_time (‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏° 2)
    local reloadTimeAttr = FindAttributeByValue(tool, 2, usedAttributes)
    if reloadTimeAttr then
        tool:SetAttribute(reloadTimeAttr, WeaponSettings.ReloadTime)
        table.insert(usedAttributes, reloadTimeAttr)
    end
    return true
end

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô restore ‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°
local function RestoreWeapon()
    local tool = GetEquippedTool()
    if not tool or next(OriginalWeaponStats) == nil then
        return
    end

    for attrName, attrValue in pairs(OriginalWeaponStats) do
        tool:SetAttribute(attrName, attrValue)
    end
end

-- ‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Tool ‡∏ó‡∏µ‡πà‡∏ñ‡∏∑‡∏≠‡∏≠‡∏¢‡∏π‡πà (‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Desc ‡πÅ‡∏ö‡∏ö real-time)
local CheckToolButton =
    WeaponTab:Button(
    {
        Title = "Check Current Tool",
        Desc = "No tool equipped",
        Locked = false,
        Callback = function()
            local tool = GetEquippedTool()
            if tool then
            else
            end
        end
    }
)

-- ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Desc ‡∏ó‡∏∏‡∏Å 0.5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
task.spawn(
    function()
        while task.wait(0.5) do
            local tool = GetEquippedTool()
            if tool then
                CheckToolButton:SetDesc("" .. tool.Name)
            else
                CheckToolButton:SetDesc("No tool equipped")
            end
        end
    end
)

-- UI Elements
WeaponTab:Toggle(
    {
        Title = "Max Accuracy",
        Flag = "maxaccuracy",
        Icon = "crosshair",
        Type = "Checkbox",
        Default = true,
        Callback = function(state)
            WeaponSettings.Accuracy = state and math.huge or 0.75
        end
    }
)

WeaponTab:Toggle(
    {
        Title = "Max Fire Rate",
        Flag = "maxfire",
        Icon = "zap",
        Type = "Checkbox",
        Default = true,
        Callback = function(state)
            WeaponSettings.FireRate = state and math.huge or 370
        end
    }
)

WeaponTab:Toggle(
    {
        Title = "Max Range",
        Flag = "maxrange",
        Icon = "maximize",
        Type = "Checkbox",
        Default = true,
        Callback = function(state)
            WeaponSettings.Range = state and math.huge or 80
        end
    }
)

WeaponTab:Toggle(
    {
        Title = "Zero Recoil",
        Flag = "zero_recoil",
        Icon = "target",
        Type = "Checkbox",
        Default = true,
        Callback = function(state)
            WeaponSettings.Recoil = state and 0 or 0.25
        end
    }
)

WeaponTab:Toggle(
    {
        Title = "Instant Reload",
        Flag = "fast_reload",
        Icon = "refresh-cw",
        Type = "Checkbox",
        Default = true,
        Callback = function(state)
            WeaponSettings.ReloadTime = state and 0 or 2
        end
    }
)

WeaponTab:Toggle(
    {
        Title = "Automatic",
        Flag = "automatic",
        Icon = "repeat",
        Type = "Checkbox",
        Default = false,
        Callback = function(state)
            WeaponSettings.Automatic = state
        end
    }
)

-- ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å Toggle ‡πÄ‡∏õ‡πá‡∏ô Button
WeaponTab:Button(
    {
        Title = "Apply Gun Mod",
        Desc = "Click to modify equipped weapon",
        Icon = "check",
        Locked = false,
        Callback = function()
            local success = ModifyWeapon()
            if success then
                WeaponSettings.IsModEnabled = true
                WindUI:Notify(
                    {
                        Title = "Weapon Mod",
                        Content = "Weapon Modified Successfully!",
                        Duration = 2
                    }
                )
            else
                WindUI:Notify(
                    {
                        Title = "Weapon Mod",
                        Content = "Please equip a gun first!",
                        Duration = 3
                    }
                )
            end
        end
    }
)

-- ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏° Restore
WeaponTab:Button(
    {
        Title = "Restore Original Stats",
        Desc = "Reset weapon to default values",
        Icon = "refresh-ccw",
        Locked = false,
        Callback = function()
            RestoreWeapon()
            OriginalWeaponStats = {}
            WeaponSettings.IsModEnabled = false
            WindUI:Notify(
                {
                    Title = "Weapon Mod",
                    Content = "Weapon Restored to Original!",
                    Duration = 2
                }
            )
        end
    }
)

-- Auto-update ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏õ‡∏∑‡∏ô (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î mod ‡∏≠‡∏¢‡∏π‡πà)
local player = game.Players.LocalPlayer

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞ mod tool ‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏ñ‡∏∑‡∏≠
local function OnToolEquipped(tool)
    if tool:IsA("Tool") and WeaponSettings.IsModEnabled then
        task.wait(0.1) -- ‡∏£‡∏≠‡πÉ‡∏´‡πâ tool ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
        OriginalWeaponStats = {} -- ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°
        ModifyWeapon()
        WindUI:Notify(
            {
                Title = "Weapon Mod",
                Content = "Auto-Modified: " .. tool.Name,
                Duration = 2
            }
        )
    end
end

-- ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ event ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ tool ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÉ‡∏ô Character
if player.Character then
    player.Character.ChildAdded:Connect(OnToolEquipped)
end

-- ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà respawn
player.CharacterAdded:Connect(
    function(char)
        char.ChildAdded:Connect(OnToolEquipped)
    end
)

local VisualTab =
    Window:Tab(
    {
        Title = "Visual",
        Icon = "eye"
    }
)

VisualTab:Section(
    {
        Title = "Players:"
    }
)

local ESPModule = {
    Settings = {
        Box = {
            Enabled = false,
            Color = Color3.fromRGB(255, 250, 250)
        },
        Name = {
            Enabled = false,
            Color = Color3.fromRGB(255, 250, 250)
        },
        Tracer = {
            Enabled = false,
            Color = Color3.fromRGB(255, 250, 250)
        },
        Distance = {
            Enabled = false,
            Color = Color3.fromRGB(255, 250, 250)
        },
        Skeleton = {
            Enabled = false,
            Color = Color3.fromRGB(255, 250, 250)
        },
        RGBEnabled = false,
        Gradient = {
            From = Color3.fromRGB(255, 250, 250)
        }
    },
    drawings = {}
}

function ESPModule.CreateDrawings(player)
    if ESPModule.drawings[player] then
        return
    end
    local drawings = {
        BoxLines = {},
        NameShadow = Drawing.new("Text"),
        Name = Drawing.new("Text"),
        Tracer = Drawing.new("Line"),
        DistanceShadow = Drawing.new("Text"),
        Distance = Drawing.new("Text"),
        -- Skeleton Lines
        skel_head = Drawing.new("Line"),
        skel_torso = Drawing.new("Line"),
        skel_leftarm = Drawing.new("Line"),
        skel_leftforearm = Drawing.new("Line"),
        skel_lefthand = Drawing.new("Line"),
        skel_rightarm = Drawing.new("Line"),
        skel_rightforearm = Drawing.new("Line"),
        skel_righthand = Drawing.new("Line"),
        skel_leftleg = Drawing.new("Line"),
        skel_leftshin = Drawing.new("Line"),
        skel_leftfoot = Drawing.new("Line"),
        skel_rightleg = Drawing.new("Line"),
        skel_rightshin = Drawing.new("Line"),
        skel_rightfoot = Drawing.new("Line")
    }

    -- ‡∏™‡∏£‡πâ‡∏≤‡∏á 12 ‡πÄ‡∏™‡πâ‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 3D Box
    for i = 1, 12 do
        local line = Drawing.new("Line")
        line.Thickness = 2
        line.Visible = false
        table.insert(drawings.BoxLines, line)
    end

    -- Name Shadow
    drawings.NameShadow.Color = Color3.new(0, 0, 0)
    drawings.NameShadow.Transparency = 0.5
    drawings.NameShadow.Outline = false
    drawings.NameShadow.Center = true
    drawings.NameShadow.Size = 16
    drawings.NameShadow.Font = 2
    drawings.NameShadow.Visible = false

    -- Name
    drawings.Name.Center = true
    drawings.Name.Outline = true
    drawings.Name.Visible = false
    drawings.Name.Size = 16
    drawings.Name.Font = 2

    -- Tracer
    drawings.Tracer.Visible = false
    drawings.Tracer.Thickness = 2

    -- Distance Shadow
    drawings.DistanceShadow.Color = Color3.new(0, 0, 0)
    drawings.DistanceShadow.Transparency = 0.5
    drawings.DistanceShadow.Outline = false
    drawings.DistanceShadow.Center = true
    drawings.DistanceShadow.Size = 14
    drawings.DistanceShadow.Font = 2
    drawings.DistanceShadow.Visible = false

    -- Distance
    drawings.Distance.Center = true
    drawings.Distance.Outline = true
    drawings.Distance.Visible = false
    drawings.Distance.Size = 14
    drawings.Distance.Font = 2

    -- Skeleton Lines Setup
    local skelLines = {
        drawings.skel_head,
        drawings.skel_torso,
        drawings.skel_leftarm,
        drawings.skel_leftforearm,
        drawings.skel_lefthand,
        drawings.skel_rightarm,
        drawings.skel_rightforearm,
        drawings.skel_righthand,
        drawings.skel_leftleg,
        drawings.skel_leftshin,
        drawings.skel_leftfoot,
        drawings.skel_rightleg,
        drawings.skel_rightshin,
        drawings.skel_rightfoot
    }

    for _, line in pairs(skelLines) do
        line.Thickness = 1.5
        line.Visible = false
    end

    ESPModule.drawings[player] = drawings
end

-- üü© Toggle Controls
VisualTab:Toggle(
    {
        Title = "3D Box ESP",
        Flag = "boxesp",
        Icon = "check",
        Type = "Checkbox",
        Default = false,
        Callback = function(Value)
            ESPModule.Settings.Box.Enabled = Value
        end
    }
)

VisualTab:Toggle(
    {
        Title = "Name ESP",
        Flag = "nameesp",
        Icon = "check",
        Type = "Checkbox",
        Default = false,
        Callback = function(Value)
            ESPModule.Settings.Name.Enabled = Value
        end
    }
)

VisualTab:Toggle(
    {
        Title = "Tracer ESP",
        Flag = "traceresp",
        Icon = "check",
        Type = "Checkbox",
        Default = false,
        Callback = function(Value)
            ESPModule.Settings.Tracer.Enabled = Value
        end
    }
)

VisualTab:Toggle(
    {
        Title = "Distance ESP",
        Flag = "distance",
        Icon = "check",
        Type = "Checkbox",
        Default = false,
        Callback = function(Value)
            ESPModule.Settings.Distance.Enabled = Value
        end
    }
)

-- ‚≠ê Skeleton ESP Toggle
VisualTab:Toggle(
    {
        Title = "Skeleton ESP",
        Flag = "skeletonesp",
        Icon = "check",
        Type = "Checkbox",
        Default = false,
        Callback = function(Value)
            ESPModule.Settings.Skeleton.Enabled = Value
        end
    }
)

-- üåà RGB Effect Toggle
VisualTab:Toggle(
    {
        Title = "Enable RGB Color",
        Flag = "rgbcolor",
        Icon = "check",
        Type = "Checkbox",
        Default = false,
        Callback = function(Value)
            ESPModule.Settings.RGBEnabled = Value
        end
    }
)

-- üé® Color Picker
VisualTab:Colorpicker(
    {
        Title = "Esp Color",
        Flag = "esp_color",
        Icon = "check",
        Type = "Checkbox",
        Default = ESPModule.Settings.Gradient.From,
        Callback = function(Color)
            ESPModule.Settings.Gradient.From = Color
        end
    }
)

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á 3D Box ‡∏ó‡∏µ‡πà‡∏û‡∏≠‡∏î‡∏µ‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏à‡∏£‡∏¥‡∏á
local function Create3DBox(character, drawings, color)
    local hrp = character:FindFirstChild("HumanoidRootPart")
    local head = character:FindFirstChild("Head")
    
    if not hrp or not head then
        return false
    end
    
    -- ‡∏´‡∏≤‡∏Ç‡∏ô‡∏≤‡∏î‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£
    local function getCharacterBounds()
        local minX, maxX = math.huge, -math.huge
        local minY, maxY = math.huge, -math.huge
        local minZ, maxZ = math.huge, -math.huge
        
        for _, part in pairs(character:GetChildren()) do
            if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                local pos = part.Position
                local size = part.Size
                
                minX = math.min(minX, pos.X - size.X/2)
                maxX = math.max(maxX, pos.X + size.X/2)
                minY = math.min(minY, pos.Y - size.Y/2)
                maxY = math.max(maxY, pos.Y + size.Y/2)
                minZ = math.min(minZ, pos.Z - size.Z/2)
                maxZ = math.max(maxZ, pos.Z + size.Z/2)
            end
        end
        
        return {
            width = (maxX - minX) * 0.55,  -- ‡∏¢‡∏∑‡∏î‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢
            height = (maxY - minY) * 0.52, -- ‡∏¢‡∏∑‡∏î‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢
            depth = (maxZ - minZ) * 0.55   -- ‡∏¢‡∏∑‡∏î‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢
        }
    end
    
    local bounds = getCharacterBounds()
    local width = bounds.width
    local height = bounds.height
    local depth = bounds.depth
    
    -- ‡πÉ‡∏ä‡πâ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á head ‡∏Å‡∏±‡∏ö hrp
    local centerY = (head.Position.Y + hrp.Position.Y) / 2
    local centerPos = Vector3.new(hrp.Position.X, centerY, hrp.Position.Z)
    local cf = CFrame.new(centerPos) * hrp.CFrame.Rotation
    
    -- 8 ‡∏°‡∏∏‡∏°‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á 3D
    local corners = {
        cf * CFrame.new(-width/2, height/2, -depth/2),  -- 1: ‡∏ã‡πâ‡∏≤‡∏¢‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤
        cf * CFrame.new(width/2, height/2, -depth/2),   -- 2: ‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤
        cf * CFrame.new(-width/2, -height/2, -depth/2), -- 3: ‡∏ã‡πâ‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤
        cf * CFrame.new(width/2, -height/2, -depth/2),  -- 4: ‡∏Ç‡∏ß‡∏≤‡∏•‡πà‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤
        cf * CFrame.new(-width/2, height/2, depth/2),   -- 5: ‡∏ã‡πâ‡∏≤‡∏¢‡∏ö‡∏ô‡∏´‡∏•‡∏±‡∏á
        cf * CFrame.new(width/2, height/2, depth/2),    -- 6: ‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô‡∏´‡∏•‡∏±‡∏á
        cf * CFrame.new(-width/2, -height/2, depth/2),  -- 7: ‡∏ã‡πâ‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏á
        cf * CFrame.new(width/2, -height/2, depth/2)    -- 8: ‡∏Ç‡∏ß‡∏≤‡∏•‡πà‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏á
    }
    
    -- ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô 2D
    local points2D = {}
    local allOnScreen = true
    
    for i, corner in ipairs(corners) do
        local pos, onScreen = workspace.CurrentCamera:WorldToViewportPoint(corner.Position)
        points2D[i] = Vector2.new(pos.X, pos.Y)
        if not onScreen then
            allOnScreen = false
        end
    end
    
    if not allOnScreen then
        return false
    end
    
    -- 12 ‡πÄ‡∏™‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á 3D
    local connections = {
        {1, 2}, {2, 4}, {4, 3}, {3, 1}, -- ‡∏´‡∏ô‡πâ‡∏≤ (Front face)
        {5, 6}, {6, 8}, {8, 7}, {7, 5}, -- ‡∏´‡∏•‡∏±‡∏á (Back face)
        {1, 5}, {2, 6}, {3, 7}, {4, 8}  -- ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏´‡∏ô‡πâ‡∏≤-‡∏´‡∏•‡∏±‡∏á
    }
    
    for i, conn in ipairs(connections) do
        local line = drawings.BoxLines[i]
        if line then
            line.From = points2D[conn[1]]
            line.To = points2D[conn[2]]
            line.Color = color
            line.Visible = true
        end
    end
    
    return true
end

-- ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Create3DBox ‡πÄ‡∏î‡∏¥‡∏°‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î ESP ‡∏î‡πâ‡∏ß‡∏¢‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ
-- ‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô Main Render Loop ‡∏ó‡∏µ‡πà‡∏°‡∏µ:
-- if ESPModule.Settings.Box.Enabled then
--     local boxVisible = Create3DBox(hrp, drawings, boxColor)
--     ...
-- end
-- 
-- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô:
-- if ESPModule.Settings.Box.Enabled then
--     local boxVisible = Create3DBox(char, drawings, boxColor)  -- ‡∏™‡πà‡∏á character ‡πÅ‡∏ó‡∏ô hrp
--     ...
-- end

-- üîÑ Main Render Loop
RunService.RenderStepped:Connect(
    function()
        local time = tick() * 1.5
        local hue1 = (time % 6) / 6
        local hue2 = ((time + 1.5) % 6) / 6
        local hue3 = ((time + 3) % 6) / 6

        for player, drawings in pairs(ESPModule.drawings) do
            local shouldProcess = false

            if player ~= game.Players.LocalPlayer and player.Character then
                local char = player.Character
                local hrp = char:FindFirstChild("HumanoidRootPart")
                local head = char:FindFirstChild("Head")

                if hrp and head then
                    shouldProcess = true

                    -- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏õ‡∏•‡∏á 3D -> 2D
                    local function to2d(part)
                        local pos, onScreen = workspace.CurrentCamera:WorldToViewportPoint(part.Position)
                        return Vector2.new(pos.X, pos.Y), onScreen
                    end

                    -- ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏µ‡∏ï‡∏≤‡∏° RGB toggle
                    local boxColor = ESPModule.Settings.RGBEnabled and Color3.fromHSV(hue1, 0.8, 1) or ESPModule.Settings.Gradient.From
                    local nameColor = ESPModule.Settings.RGBEnabled and Color3.fromHSV(hue1, 0.6, 1) or ESPModule.Settings.Gradient.From
                    local tracerColor = ESPModule.Settings.RGBEnabled and Color3.fromHSV(hue2, 0.8, 1) or ESPModule.Settings.Gradient.From
                    local distColor = ESPModule.Settings.RGBEnabled and Color3.fromHSV(hue3, 0.7, 1) or ESPModule.Settings.Gradient.From
                    local skelColor = ESPModule.Settings.RGBEnabled and Color3.fromHSV(hue1, 0.8, 1) or ESPModule.Settings.Gradient.From

                    -- üì¶ 3D Box ESP
-- üì¶ 3D Box ESP
if ESPModule.Settings.Box.Enabled then
    local boxVisible = Create3DBox(char, drawings, boxColor)  -- ‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡∏™‡πà‡∏á char ‡πÅ‡∏ó‡∏ô hrp)
    if not boxVisible then
        for _, line in pairs(drawings.BoxLines) do
            line.Visible = false
        end
    end
                    else
                        for _, line in pairs(drawings.BoxLines) do
                            line.Visible = false
                        end
                    end

                    -- ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Name ‡πÅ‡∏•‡∏∞ Distance
                    local headTop = head.Position + Vector3.new(0, 0.5, 0)
                    local headPos, headOnScreen = workspace.CurrentCamera:WorldToViewportPoint(headTop)
                    local rootPos, rootOnScreen = workspace.CurrentCamera:WorldToViewportPoint(hrp.Position)
                    local feetPosition = hrp.Position - Vector3.new(0, 3.3, 0)
                    local feetPos, feetOnScreen = workspace.CurrentCamera:WorldToViewportPoint(feetPosition)
                    local onScreen = headOnScreen and feetOnScreen

                    -- üìù Name ESP
                    if ESPModule.Settings.Name.Enabled and onScreen then
                        drawings.NameShadow.Text = player.Name
                        drawings.NameShadow.Position = Vector2.new(headPos.X + 2, headPos.Y - 22)
                        drawings.NameShadow.Visible = true

                        drawings.Name.Text = player.Name
                        drawings.Name.Color = nameColor
                        drawings.Name.Position = Vector2.new(headPos.X, headPos.Y - 20)
                        drawings.Name.Visible = true
                    else
                        drawings.NameShadow.Visible = false
                        drawings.Name.Visible = false
                    end

                    -- üìè Tracer ESP
                    if ESPModule.Settings.Tracer.Enabled and rootOnScreen then
                        drawings.Tracer.Visible = true
                        drawings.Tracer.From = Vector2.new(workspace.CurrentCamera.ViewportSize.X / 2, 0)
                        drawings.Tracer.To = Vector2.new(rootPos.X, rootPos.Y)
                        drawings.Tracer.Color = tracerColor
                    else
                        drawings.Tracer.Visible = false
                    end

                    -- üìç Distance ESP
                    if ESPModule.Settings.Distance.Enabled and onScreen then
                        local distance =
                            math.floor(
                            (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - hrp.Position).Magnitude
                        )

                        drawings.DistanceShadow.Text = distance .. "m"
                        drawings.DistanceShadow.Position = Vector2.new(feetPos.X + 2, feetPos.Y + 7)
                        drawings.DistanceShadow.Visible = true

                        drawings.Distance.Text = distance .. "m"
                        drawings.Distance.Color = distColor
                        drawings.Distance.Position = Vector2.new(feetPos.X, feetPos.Y + 5)
                        drawings.Distance.Visible = true
                    else
                        drawings.DistanceShadow.Visible = false
                        drawings.Distance.Visible = false
                    end

                    -- üíÄ Skeleton ESP
                    if ESPModule.Settings.Skeleton.Enabled then
                        local torso_upper = char:FindFirstChild("UpperTorso") or char:FindFirstChild("Torso")
                        local torso_lower = char:FindFirstChild("LowerTorso") or torso_upper
                        local leftupperarm = char:FindFirstChild("LeftUpperArm") or char:FindFirstChild("Left Arm")
                        local leftlowerarm = char:FindFirstChild("LeftLowerArm")
                        local lefthand = char:FindFirstChild("LeftHand")
                        local rightupperarm = char:FindFirstChild("RightUpperArm") or char:FindFirstChild("Right Arm")
                        local rightlowerarm = char:FindFirstChild("RightLowerArm")
                        local righthand = char:FindFirstChild("RightHand")
                        local leftupperleg = char:FindFirstChild("LeftUpperLeg") or char:FindFirstChild("Left Leg")
                        local leftlowerleg = char:FindFirstChild("LeftLowerLeg")
                        local leftfoot = char:FindFirstChild("LeftFoot")
                        local rightupperleg = char:FindFirstChild("RightUpperLeg") or char:FindFirstChild("Right Leg")
                        local rightlowerleg = char:FindFirstChild("RightLowerLeg")
                        local rightfoot = char:FindFirstChild("RightFoot")

                        if torso_upper and torso_lower then
                            local head2d, headOn = to2d(head)
                            local torsoU2d, torsoUOn = to2d(torso_upper)
                            local torsoL2d, torsoLOn = to2d(torso_lower)

                            if headOn and torsoUOn then
                                drawings.skel_head.From = head2d
                                drawings.skel_head.To = torsoU2d
                                drawings.skel_head.Color = skelColor
                                drawings.skel_head.Visible = true

                                if torsoLOn then
                                    drawings.skel_torso.From = torsoU2d
                                    drawings.skel_torso.To = torsoL2d
                                    drawings.skel_torso.Color = skelColor
                                    drawings.skel_torso.Visible = true
                                else
                                    drawings.skel_torso.Visible = false
                                end

                                -- Left Arm
                                if leftupperarm then
                                    local lUpperArm2d, lUpperArmOn = to2d(leftupperarm)
                                    if lUpperArmOn then
                                        drawings.skel_leftarm.From = torsoU2d
                                        drawings.skel_leftarm.To = lUpperArm2d
                                        drawings.skel_leftarm.Color = skelColor
                                        drawings.skel_leftarm.Visible = true

                                        if leftlowerarm then
                                            local lLowerArm2d, lLowerArmOn = to2d(leftlowerarm)
                                            if lLowerArmOn then
                                                drawings.skel_leftforearm.From = lUpperArm2d
                                                drawings.skel_leftforearm.To = lLowerArm2d
                                                drawings.skel_leftforearm.Color = skelColor
                                                drawings.skel_leftforearm.Visible = true

                                                if lefthand then
                                                    local lHand2d, lHandOn = to2d(lefthand)
                                                    if lHandOn then
                                                        drawings.skel_lefthand.From = lLowerArm2d
                                                        drawings.skel_lefthand.To = lHand2d
                                                        drawings.skel_lefthand.Color = skelColor
                                                        drawings.skel_lefthand.Visible = true
                                                    else
                                                        drawings.skel_lefthand.Visible = false
                                                    end
                                                end
                                            else
                                                drawings.skel_leftforearm.Visible = false
                                                drawings.skel_lefthand.Visible = false
                                            end
                                        end
                                    else
                                        drawings.skel_leftarm.Visible = false
                                        drawings.skel_leftforearm.Visible = false
                                        drawings.skel_lefthand.Visible = false
                                    end
                                end

                                -- Right Arm
                                if rightupperarm then
                                    local rUpperArm2d, rUpperArmOn = to2d(rightupperarm)
                                    if rUpperArmOn then
                                        drawings.skel_rightarm.From = torsoU2d
                                        drawings.skel_rightarm.To = rUpperArm2d
                                        drawings.skel_rightarm.Color = skelColor
                                        drawings.skel_rightarm.Visible = true

                                        if rightlowerarm then
                                            local rLowerArm2d, rLowerArmOn = to2d(rightlowerarm)
                                            if rLowerArmOn then
                                                drawings.skel_rightforearm.From = rUpperArm2d
                                                drawings.skel_rightforearm.To = rLowerArm2d
                                                drawings.skel_rightforearm.Color = skelColor
                                                drawings.skel_rightforearm.Visible = true

                                                if righthand then
                                                    local rHand2d, rHandOn = to2d(righthand)
                                                    if rHandOn then
                                                        drawings.skel_righthand.From = rLowerArm2d
                                                        drawings.skel_righthand.To = rHand2d
                                                        drawings.skel_righthand.Color = skelColor
                                                        drawings.skel_righthand.Visible = true
                                                    else
                                                        drawings.skel_righthand.Visible = false
                                                    end
                                                end
                                            else
                                                drawings.skel_rightforearm.Visible = false
                                                drawings.skel_righthand.Visible = false
                                            end
                                        end
                                    else
                                        drawings.skel_rightarm.Visible = false
                                        drawings.skel_rightforearm.Visible = false
                                        drawings.skel_righthand.Visible = false
                                    end
                                end

                                -- Left Leg
                                if leftupperleg and torsoLOn then
                                    local lUpperLeg2d, lUpperLegOn = to2d(leftupperleg)
                                    if lUpperLegOn then
                                        drawings.skel_leftleg.From = torsoL2d
                                        drawings.skel_leftleg.To = lUpperLeg2d
                                        drawings.skel_leftleg.Color = skelColor
                                        drawings.skel_leftleg.Visible = true

                                        if leftlowerleg then
                                            local lLowerLeg2d, lLowerLegOn = to2d(leftlowerleg)
                                            if lLowerLegOn then
                                                drawings.skel_leftshin.From = lUpperLeg2d
                                                drawings.skel_leftshin.To = lLowerLeg2d
                                                drawings.skel_leftshin.Color = skelColor
                                                drawings.skel_leftshin.Visible = true

                                                if leftfoot then
                                                    local lFoot2d, lFootOn = to2d(leftfoot)
                                                    if lFootOn then
                                                        drawings.skel_leftfoot.From = lLowerLeg2d
                                                        drawings.skel_leftfoot.To = lFoot2d
                                                        drawings.skel_leftfoot.Color = skelColor
                                                        drawings.skel_leftfoot.Visible = true
                                                    else
                                                        drawings.skel_leftfoot.Visible = false
                                                    end
                                                end
                                            else
                                                drawings.skel_leftshin.Visible = false
                                                drawings.skel_leftfoot.Visible = false
                                            end
                                        end
                                    else
                                        drawings.skel_leftleg.Visible = false
                                        drawings.skel_leftshin.Visible = false
                                        drawings.skel_leftfoot.Visible = false
                                    end
                                end

                                -- Right Leg
                                if rightupperleg and torsoLOn then
                                    local rUpperLeg2d, rUpperLegOn = to2d(rightupperleg)
                                    if rUpperLegOn then
                                        drawings.skel_rightleg.From = torsoL2d
                                        drawings.skel_rightleg.To = rUpperLeg2d
                                        drawings.skel_rightleg.Color = skelColor
                                        drawings.skel_rightleg.Visible = true

                                        if rightlowerleg then
                                            local rLowerLeg2d, rLowerLegOn = to2d(rightlowerleg)
                                            if rLowerLegOn then
                                                drawings.skel_rightshin.From = rUpperLeg2d
                                                drawings.skel_rightshin.To = rLowerLeg2d
                                                drawings.skel_rightshin.Color = skelColor
                                                drawings.skel_rightshin.Visible = true

                                                if rightfoot then
                                                    local rFoot2d, rFootOn = to2d(rightfoot)
                                                    if rFootOn then
                                                        drawings.skel_rightfoot.From = rLowerLeg2d
                                                        drawings.skel_rightfoot.To = rFoot2d
                                                        drawings.skel_rightfoot.Color = skelColor
                                                        drawings.skel_rightfoot.Visible = true
                                                    else
                                                        drawings.skel_rightfoot.Visible = false
                                                    end
                                                end
                                            else
                                                drawings.skel_rightshin.Visible = false
                                                drawings.skel_rightfoot.Visible = false
                                            end
                                        end
                                    else
                                        drawings.skel_rightleg.Visible = false
                                        drawings.skel_rightshin.Visible = false
                                        drawings.skel_rightfoot.Visible = false
                                    end
                                end
                            else
                                -- ‡∏ã‡πà‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ñ‡πâ‡∏≤ head ‡∏´‡∏£‡∏∑‡∏≠ torso ‡∏ô‡∏≠‡∏Å‡∏à‡∏≠
                                drawings.skel_head.Visible = false
                                drawings.skel_torso.Visible = false
                                drawings.skel_leftarm.Visible = false
                                drawings.skel_leftforearm.Visible = false
                                drawings.skel_lefthand.Visible = false
                                drawings.skel_rightarm.Visible = false
                                drawings.skel_rightforearm.Visible = false
                                drawings.skel_righthand.Visible = false
                                drawings.skel_leftleg.Visible = false
                                drawings.skel_leftshin.Visible = false
                                drawings.skel_leftfoot.Visible = false
                                drawings.skel_rightleg.Visible = false
                                drawings.skel_rightshin.Visible = false
                                drawings.skel_rightfoot.Visible = false
                            end
                        end
                    else
                        -- ‡∏ã‡πà‡∏≠‡∏ô Skeleton ‡∏ñ‡πâ‡∏≤‡∏õ‡∏¥‡∏î
                        local skelParts = {
                            drawings.skel_head,
                            drawings.skel_torso,
                            drawings.skel_leftarm,
                            drawings.skel_leftforearm,
                            drawings.skel_lefthand,
                            drawings.skel_rightarm,
                            drawings.skel_rightforearm,
                            drawings.skel_righthand,
                            drawings.skel_leftleg,
                            drawings.skel_leftshin,
                            drawings.skel_leftfoot,
                            drawings.skel_rightleg,
                            drawings.skel_rightshin,
                            drawings.skel_rightfoot
                        }
                        for _, d in pairs(skelParts) do
                            d.Visible = false
                        end
                    end
                end
            end

            if not shouldProcess then
                for _, line in pairs(drawings.BoxLines) do
                    line.Visible = false
                end
                drawings.NameShadow.Visible = false
                drawings.Name.Visible = false
                drawings.Tracer.Visible = false
                drawings.DistanceShadow.Visible = false
                drawings.Distance.Visible = false

                local skelParts = {
                    drawings.skel_head,
                    drawings.skel_torso,
                    drawings.skel_leftarm,
                    drawings.skel_leftforearm,
                    drawings.skel_lefthand,
                    drawings.skel_rightarm,
                    drawings.skel_rightforearm,
                    drawings.skel_righthand,
                    drawings.skel_leftleg,
                    drawings.skel_leftshin,
                    drawings.skel_leftfoot,
                    drawings.skel_rightleg,
                    drawings.skel_rightshin,
                    drawings.skel_rightfoot
                }
                for _, d in pairs(skelParts) do
                    d.Visible = false
                end
            end
        end
    end
)

-- ‡∏™‡∏£‡πâ‡∏≤‡∏á Drawings ‡πÉ‡∏´‡πâ player ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô
for _, plr in pairs(game.Players:GetPlayers()) do
    if plr ~= game.Players.LocalPlayer then
        ESPModule.CreateDrawings(plr)
    end
end

game.Players.PlayerAdded:Connect(ESPModule.CreateDrawings)
game.Players.PlayerRemoving:Connect(
    function(plr)
        if ESPModule.drawings[plr] then
            for _, line in pairs(ESPModule.drawings[plr].BoxLines) do
                line:Remove()
            end
            for _, d in pairs(ESPModule.drawings[plr]) do
                if d.Remove then
                    d:Remove()
                end
            end
            ESPModule.drawings[plr] = nil
        end
    end
)

VisualTab:Toggle(
    {
        Title = "Inventory Viewer",
        Icon = "check",
        Type = "Checkbox",
        Default = true,
        Callback = function(Value)
            _G.InventoryViewerEnabled = Value
            local Players = game:GetService("Players")
            local ReplicatedStorage = game:GetService("ReplicatedStorage")
            local Client = Players.LocalPlayer

            local function GetColorFromRarity(rarityName)
                local colors = {
                    ["Common"] = Color3.fromRGB(255, 255, 255),
                    ["UnCommon"] = Color3.fromRGB(99, 255, 52),
                    ["Rare"] = Color3.fromRGB(51, 170, 255),
                    ["Legendary"] = Color3.fromRGB(255, 150, 0),
                    ["Epic"] = Color3.fromRGB(237, 44, 255),
                    ["Omega"] = Color3.fromRGB(255, 20, 51)
                }
                return colors[rarityName] or Color3.fromRGB(255, 255, 255)
            end

            if Value then
                if not _G.ViewerRunning then
                    _G.ViewerRunning = true
                    task.spawn(
                        function()
                            while task.wait(0.2) do
                                if _G.InventoryViewerEnabled then
                                    pcall(
                                        function()
                                            for _, v in pairs(Players:GetPlayers()) do
                                                if
                                                    v ~= Client and v.Character and
                                                        v.Character:FindFirstChild("HumanoidRootPart")
                                                 then
                                                    local root = v.Character.HumanoidRootPart
                                                    local gui = root:FindFirstChild("ItemBillboard")

                                                    if not gui then
                                                        gui = Instance.new("BillboardGui")
                                                        gui.Name = "ItemBillboard"
                                                        gui.AlwaysOnTop = true
                                                        gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
                                                        gui.Size = UDim2.new(0, 300, 0, 80)
                                                        gui.StudsOffset = Vector3.new(0, -5, 0)
                                                        gui.ExtentsOffset = Vector3.new(0, 1, 0)
                                                        gui.LightInfluence = 1
                                                        gui.Parent = root

                                                        local bg = Instance.new("Frame")
                                                        bg.Name = "BG"
                                                        bg.BackgroundTransparency = 1
                                                        bg.Size = UDim2.new(1, 0, 1, 0)
                                                        bg.AnchorPoint = Vector2.new(0.5, 0.5)
                                                        bg.Position = UDim2.new(0.5, 0, 0.5, 0)
                                                        bg.Parent = gui

                                                        local layout = Instance.new("UIListLayout")
                                                        layout.FillDirection = Enum.FillDirection.Horizontal
                                                        layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
                                                        layout.VerticalAlignment = Enum.VerticalAlignment.Center
                                                        layout.Padding = UDim.new(0, 8)
                                                        layout.Parent = bg
                                                    end

                                                    local bg = gui:FindFirstChild("BG")
                                                    if bg then
                                                        local Items = {}

                                                        for _, child in pairs(bg:GetChildren()) do
                                                            if child:IsA("Frame") then
                                                                child:Destroy()
                                                            end
                                                        end

                                                        for _, container in pairs(
                                                            {
                                                                v:FindFirstChild("Backpack"),
                                                                v.Character
                                                            }
                                                        ) do
                                                            if container then
                                                                for _, tool in pairs(container:GetChildren()) do
                                                                    if
                                                                        tool:IsA("Tool") and
                                                                            not tool:GetAttribute("JobTool") and
                                                                            not tool:GetAttribute("Locked")
                                                                     then
                                                                        local itemFolder =
                                                                            tool:GetAttribute("AmmoType") and
                                                                            ReplicatedStorage.Items.gun or
                                                                            ReplicatedStorage.Items.melee
                                                                        for _, z in pairs(itemFolder:GetChildren()) do
                                                                            if
                                                                                tool:GetAttribute("RarityName") ==
                                                                                    z:GetAttribute("RarityName") and
                                                                                    tool:GetAttribute("RarityPrice") ==
                                                                                        z:GetAttribute("RarityPrice")
                                                                             then
                                                                                local imageId =
                                                                                    z:GetAttribute("ImageId")
                                                                                if imageId then
                                                                                    Items[z.Name] = true
                                                                                    if
                                                                                        not bg:FindFirstChild(
                                                                                            z.Name .. "_bg"
                                                                                        )
                                                                                     then
                                                                                        local itemContainer =
                                                                                            Instance.new("Frame")
                                                                                        itemContainer.Name =
                                                                                            z.Name .. "_bg"
                                                                                        itemContainer.Size =
                                                                                            UDim2.new(0, 50, 0, 70)
                                                                                        itemContainer.BackgroundTransparency =
                                                                                            1
                                                                                        itemContainer.BorderSizePixel =
                                                                                            0
                                                                                        itemContainer.Parent = bg

                                                                                        local iconBg =
                                                                                            Instance.new("Frame")
                                                                                        iconBg.Name = "IconBg"
                                                                                        iconBg.Size =
                                                                                            UDim2.new(0, 50, 0, 50)
                                                                                        iconBg.Position =
                                                                                            UDim2.new(0, 0, 0, 0)
                                                                                        iconBg.BackgroundColor3 =
                                                                                            GetColorFromRarity(
                                                                                            z:GetAttribute("RarityName")
                                                                                        )
                                                                                        iconBg.BackgroundTransparency =
                                                                                            1
                                                                                        iconBg.BorderSizePixel = 0
                                                                                        iconBg.Parent = itemContainer

                                                                                        local bgImage =
                                                                                            Instance.new("ImageLabel")
                                                                                        bgImage.Name = "Background"
                                                                                        bgImage.Size =
                                                                                            UDim2.new(1, 0, 1, 0)
                                                                                        bgImage.BackgroundTransparency =
                                                                                            1
                                                                                        bgImage.Image =
                                                                                            "rbxassetid://137066731814190"
                                                                                        bgImage.ImageColor3 =
                                                                                            GetColorFromRarity(
                                                                                            z:GetAttribute("RarityName")
                                                                                        )
                                                                                        bgImage.ZIndex = 0
                                                                                        bgImage.Parent = iconBg

                                                                                        local corner =
                                                                                            Instance.new("UICorner")
                                                                                        corner.CornerRadius =
                                                                                            UDim.new(0.15, 0)
                                                                                        corner.Parent = iconBg

                                                                                        local icon =
                                                                                            Instance.new("ImageLabel")
                                                                                        icon.Name = z.Name
                                                                                        icon.Image = imageId
                                                                                        icon.BackgroundTransparency = 1
                                                                                        icon.BorderSizePixel = 0
                                                                                        icon.Size =
                                                                                            UDim2.new(0.85, 0, 0.85, 0)
                                                                                        icon.Position =
                                                                                            UDim2.new(
                                                                                            0.075,
                                                                                            0,
                                                                                            0.075,
                                                                                            0
                                                                                        )
                                                                                        icon.Parent = iconBg

                                                                                        local corner2 =
                                                                                            Instance.new("UICorner")
                                                                                        corner2.CornerRadius =
                                                                                            UDim.new(0, 9)
                                                                                        corner2.Parent = icon

                                                                                        local nameLabel =
                                                                                            Instance.new("TextLabel")
                                                                                        nameLabel.Name = "WeaponName"
                                                                                        nameLabel.Size =
                                                                                            UDim2.new(1, 0, 0, 20)
                                                                                        nameLabel.Position =
                                                                                            UDim2.new(0, 0, 0, 52)
                                                                                        nameLabel.BackgroundTransparency =
                                                                                            1
                                                                                        nameLabel.Text = z.Name
                                                                                        nameLabel.TextColor3 =
                                                                                            Color3.fromRGB(
                                                                                            255,
                                                                                            255,
                                                                                            255
                                                                                        )
                                                                                        nameLabel.TextStrokeTransparency =
                                                                                            0.5
                                                                                        nameLabel.TextStrokeColor3 =
                                                                                            Color3.fromRGB(0, 0, 0)
                                                                                        nameLabel.TextScaled = true
                                                                                        nameLabel.Font =
                                                                                            Enum.Font.GothamBold
                                                                                        nameLabel.Parent = itemContainer

                                                                                        local textSizeConstraint =
                                                                                            Instance.new(
                                                                                            "UITextSizeConstraint"
                                                                                        )
                                                                                        textSizeConstraint.MaxTextSize =
                                                                                            10
                                                                                        textSizeConstraint.Parent =
                                                                                            nameLabel
                                                                                    end
                                                                                end
                                                                            end
                                                                        end
                                                                    end
                                                                end
                                                            end
                                                        end

                                                        gui.Enabled = _G.InventoryViewerEnabled
                                                        for _, child in pairs(bg:GetChildren()) do
                                                            if child:IsA("Frame") then
                                                                local itemName = child.Name:gsub("_bg$", "")
                                                                if not Items[itemName] then
                                                                    child:Destroy()
                                                                end
                                                            end
                                                        end
                                                    end
                                                end
                                            end
                                        end
                                    )
                                end
                            end
                        end
                    )
                end
            else
                for _, v in pairs(Players:GetPlayers()) do
                    if v.Character and v.Character:FindFirstChild("HumanoidRootPart") then
                        local gui = v.Character.HumanoidRootPart:FindFirstChild("ItemBillboard")
                        if gui then
                            gui:Destroy()
                        end
                    end
                end
            end
        end
    }
)

local item_drawings = {}
local RunService = game:GetService("RunService")
local CurrentCamera = workspace.CurrentCamera
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- ‡∏™‡∏£‡πâ‡∏≤‡∏á ScreenGui ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "DropItemViewerGui"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.Parent = PlayerGui

VisualTab:Toggle(
    {
        Title = "Drop Item Viewer",
        Flag = "dropitem_viewer",
        Icon = "check",
        Type = "Checkbox",
        Default = true,
        Callback = function(state)
            c().EnabledItemDrop = state
        end
    }
)

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏≤ Image ID ‡∏à‡∏≤‡∏Å ReplicatedStorage
local function getItemImageId(itemName)
    -- ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô Money ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ MoneyViewport
    if itemName == "Money" then
        local success, moneyModel = pcall(function()
            return LocalPlayer.PlayerGui.TopRightHud.Holder.Frame.Frame.MoneyViewport.MoneyModel
        end)
        
        if success and moneyModel then
            return moneyModel -- ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ Model ‡πÅ‡∏ó‡∏ô ImageId
        end
    end
    
    local Items = ReplicatedStorage:FindFirstChild("Items")
    if not Items then
        return nil
    end
    
    -- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÉ‡∏ô folder ‡∏¢‡πà‡∏≠‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    for _, category in ipairs(Items:GetChildren()) do
        if category:IsA("Folder") then
            local itemData = category:FindFirstChild(itemName)
            if itemData then
                -- ‡∏•‡∏≠‡∏á‡∏´‡∏≤‡∏à‡∏≤‡∏Å Attributes
                local imageId = itemData:GetAttribute("ImageId")
                if imageId then
                    return imageId
                end
                
                -- ‡∏•‡∏≠‡∏á‡∏´‡∏≤‡∏à‡∏≤‡∏Å attributes ‡∏≠‡∏∑‡πà‡∏ô‡πÜ
                for _, attrName in ipairs({"Image", "Icon", "TextureId", "Texture"}) do
                    local attr = itemData:GetAttribute(attrName)
                    if attr then
                        return attr
                    end
                end
            end
        end
    end
    
    return nil
end

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏õ‡∏•‡∏á Image ID ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô rbxassetid:// ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß)
local function formatImageId(imageId)
    if not imageId or imageId == "" then
        return nil
    end
    return imageId
end

RunService.RenderStepped:Connect(
    function()
        if not c().EnabledItemDrop then
            for _, d in pairs(item_drawings) do
                if d.shadowFrame then
                    d.shadowFrame.Visible = false
                end
                if d.imageFrame then
                    d.imageFrame.Visible = false
                end
                if d.nameShadow then
                    d.nameShadow.Visible = false
                end
                if d.name then
                    d.name.Visible = false
                end
                if d.distShadow then
                    d.distShadow.Visible = false
                end
                if d.dist then
                    d.dist.Visible = false
                end
            end
            return
        end

        local Dropped = workspace:FindFirstChild("DroppedItems")
        if not Dropped then
            return
        end

        -- ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏≤‡∏¢‡πÑ‡∏õ
        for item, d in pairs(item_drawings) do
            if not item or not item.Parent then
                if d.shadowFrame then
                    d.shadowFrame:Destroy()
                end
                if d.imageFrame then
                    d.imageFrame:Destroy()
                end
                if d.nameShadow then
                    d.nameShadow:Remove()
                end
                if d.name then
                    d.name:Remove()
                end
                if d.distShadow then
                    d.distShadow:Remove()
                end
                if d.dist then
                    d.dist:Remove()
                end
                item_drawings[item] = nil
            end
        end

        -- ‡πÄ‡∏Å‡πá‡∏ö item ‡πÉ‡∏Å‡∏•‡πâ
        local nearbyItems = {}
        for _, item in ipairs(Dropped:GetChildren()) do
            if item:IsA("Model") and item:FindFirstChild("PickUpZone") and not item:GetAttribute("Locked") then
                local dist = (CurrentCamera.CFrame.Position - item.PickUpZone.Position).Magnitude
                table.insert(nearbyItems, {item = item, dist = dist})
            end
        end

        -- ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÉ‡∏Å‡∏•‡πâ ‚Üí ‡πÑ‡∏Å‡∏•
        table.sort(
            nearbyItems,
            function(a, b)
                return a.dist < b.dist
            end
        )

        -- ‡∏Ç‡∏ô‡∏≤‡∏î‡∏£‡∏π‡∏õ
        local IMAGE_SIZE = 60

        -- ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 20 ‡∏≠‡∏±‡∏ô
        for i = 1, math.min(20, #nearbyItems) do
            local item = nearbyItems[i].item
            local d = item_drawings[item]

            if not d then
                d = {
                    nameShadow = Drawing.new("Text"),
                    name = Drawing.new("Text"),
                    distShadow = Drawing.new("Text"),
                    dist = Drawing.new("Text")
                }

                -- ‡∏™‡∏£‡πâ‡∏≤‡∏á Shadow Frame
                local shadowFrame = Instance.new("Frame")
                shadowFrame.Name = "ShadowFrame"
                shadowFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
                shadowFrame.BackgroundTransparency = 0.5
                shadowFrame.Size = UDim2.new(0, IMAGE_SIZE + 8, 0, IMAGE_SIZE + 8)
                shadowFrame.AnchorPoint = Vector2.new(0.5, 0.5)
                shadowFrame.BorderSizePixel = 0
                shadowFrame.Parent = screenGui
                
                local shadowCorner = Instance.new("UICorner")
                shadowCorner.CornerRadius = UDim.new(0, 10)
                shadowCorner.Parent = shadowFrame
                
                d.shadowFrame = shadowFrame

                -- ‡∏™‡∏£‡πâ‡∏≤‡∏á ImageLabel ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ
                local imageFrame = Instance.new("ImageLabel")
                imageFrame.Name = "ItemImage_" .. item.Name
                imageFrame.BackgroundTransparency = 1
                imageFrame.Size = UDim2.new(0, IMAGE_SIZE, 0, IMAGE_SIZE)
                imageFrame.AnchorPoint = Vector2.new(0.5, 0.5)
                imageFrame.ScaleType = Enum.ScaleType.Fit
                imageFrame.Parent = screenGui
                
                -- ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ
                local rawImageId = getItemImageId(item.Name)
                
                -- ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô Money ‡πÅ‡∏•‡∏∞‡πÑ‡∏î‡πâ Model ‡∏°‡∏≤ ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ ViewportFrame
                if item.Name == "Money" and typeof(rawImageId) == "Instance" and rawImageId:IsA("Model") then
                    imageFrame:Destroy()
                    
                    -- ‡∏™‡∏£‡πâ‡∏≤‡∏á ViewportFrame ‡πÅ‡∏ó‡∏ô
                    local viewportFrame = Instance.new("ViewportFrame")
                    viewportFrame.Name = "MoneyViewport_" .. item.Name
                    viewportFrame.BackgroundTransparency = 1
                    viewportFrame.Size = UDim2.new(0, IMAGE_SIZE, 0, IMAGE_SIZE)
                    viewportFrame.AnchorPoint = Vector2.new(0.5, 0.5)
                    viewportFrame.Parent = screenGui
                    
                    -- Clone Money Model
                    local moneyClone = rawImageId:Clone()
                    moneyClone.Parent = viewportFrame
                    
                    -- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Viewport
                    local camera = Instance.new("Camera")
                    camera.Parent = viewportFrame
                    viewportFrame.CurrentCamera = camera
                    
                    -- ‡∏ï‡∏±‡πâ‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á
                    local modelCF = moneyClone:GetBoundingBox()
                    camera.CFrame = modelCF * CFrame.new(0, 0, 3)
                    camera.Focus = modelCF
                    
                    imageFrame = viewportFrame
                else
                    -- ‡πÉ‡∏ä‡πâ‡∏£‡∏π‡∏õ‡∏õ‡∏Å‡∏ï‡∏¥
                    local imageId = formatImageId(rawImageId)
                    if imageId then
                        imageFrame.Image = imageId
                    else
                        -- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏ó‡∏ô
                        imageFrame.BackgroundTransparency = 0.3
                        imageFrame.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
                        
                        local corner = Instance.new("UICorner")
                        corner.CornerRadius = UDim.new(0, 8)
                        corner.Parent = imageFrame
                    end
                end
                
                d.imageFrame = imageFrame

                -- Shadow ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡∏∑‡πà‡∏≠
                d.nameShadow.Color = Color3.new(0, 0, 0)
                d.nameShadow.Transparency = 0.5
                d.nameShadow.Outline = false
                d.nameShadow.Center = true
                d.nameShadow.Size = 16
                d.nameShadow.Font = 2

                -- ‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏±‡∏Å
                d.name.Color = Color3.new(1, 1, 1)
                d.name.Outline = true
                d.name.Center = true
                d.name.Size = 16
                d.name.Font = 2

                -- Shadow ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô
                d.distShadow.Color = Color3.new(0, 0, 0)
                d.distShadow.Transparency = 0.5
                d.distShadow.Outline = false
                d.distShadow.Center = true
                d.distShadow.Size = 14
                d.distShadow.Font = 2

                -- ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏•‡∏±‡∏Å
                d.dist.Color = Color3.new(1, 1, 1)
                d.dist.Outline = true
                d.dist.Center = true
                d.dist.Size = 14
                d.dist.Font = 2

                item_drawings[item] = d
            end

            -- ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
            local pos, onScreen = CurrentCamera:WorldToViewportPoint(item.PickUpZone.Position)

            if onScreen then
                local halfSize = IMAGE_SIZE / 2

                -- ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Å‡∏£‡∏≠‡∏ö‡∏à‡∏≤‡∏Å‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á
                local centerX = pos.X
                local centerY = pos.Y

                -- ‡∏™‡∏£‡πâ‡∏≤‡∏á gradient effect ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏µ‡∏ï‡πà‡∏≤‡∏á‡πÜ
                local time = tick() * 1.5
                local hue1 = (time % 6) / 6
                local hue3 = ((time + 3) % 6) / 6

                local color1 = Color3.fromHSV(hue1, 0.9, 1)
                local color3 = Color3.fromHSV(hue3, 0.7, 1)

                -- ‡πÅ‡∏™‡∏î‡∏á Shadow Frame (‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏á)
                d.shadowFrame.Position = UDim2.new(0, centerX + 3, 0, centerY + 3)
                d.shadowFrame.Visible = true

                -- ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ (‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤)
                d.imageFrame.Position = UDim2.new(0, centerX, 0, centerY)
                d.imageFrame.Visible = true

                -- ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏≠‡πÄ‡∏ó‡∏° (‡∏°‡∏µ shadow)
                local nameY = centerY - halfSize - 25

                d.nameShadow.Text = item.Name
                d.nameShadow.Position = Vector2.new(centerX + 2, nameY + 2)
                d.nameShadow.Visible = true

                d.name.Text = item.Name
                d.name.Color = Color3.fromHSV(hue1, 0.6, 1)
                d.name.Position = Vector2.new(centerX, nameY)
                d.name.Visible = true

                -- ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (‡∏°‡∏µ shadow)
                local amount = item:FindFirstChild("AmountBillboardGui")
                amount = amount and amount:FindFirstChild("TextLabel") and amount.TextLabel.Text or "?"
                local amountText = "[ " .. amount .. " ]"

                local distY = centerY + halfSize + 10

                -- Shadow
                d.distShadow.Text = amountText
                d.distShadow.Position = Vector2.new(centerX + 2, distY + 2)
                d.distShadow.Visible = true

                -- Text ‡∏´‡∏•‡∏±‡∏Å
                d.dist.Text = amountText
                d.dist.Color = color3
                d.dist.Position = Vector2.new(centerX, distY)
                d.dist.Visible = true
            else
                if d.shadowFrame then
                    d.shadowFrame.Visible = false
                end
                if d.imageFrame then
                    d.imageFrame.Visible = false
                end
                d.nameShadow.Visible = false
                d.name.Visible = false
                d.distShadow.Visible = false
                d.dist.Visible = false
            end
        end
    end
)

local MiscTab =
    Window:Tab(
    {
        Title = "Misc",
        Icon = "circle-ellipsis"
    }
)

local EnabledSkip = false

-- ‡∏õ‡∏∏‡πà‡∏° Toggle
MiscTab:Toggle(
    {
        Title = "Skip Animation",
        Flag = "skip_anim",
        Icon = "check",
        Type = "Checkbox",
        Value = false,
        Callback = function(Value)
            EnabledSkip = Value
        end
    }
)

-- ‡∏ß‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
func["SkipSpinAnimation"] = function()
    while task.wait() do
        if EnabledSkip then
            if CrateController.spinning.get() then
                CrateController.skip_spin()
            end
        end
    end
end

-- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏ô background
task.spawn(func["SkipSpinAnimation"])

MiscTab:Toggle({
    Title = "Infinite Hotbar",
    Flag = "infhotbar",
    Icon = "check",
    Type = "Checkbox",

    Callback = function(Value)
        if not Value then
            return
        end
        
        -- üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞ Hook ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô get_max_items
        for _, v in pairs(getgc(true)) do
            if type(v) == "function" then
                local info = debug.getinfo(v)

                if info.name == "get_max_items" then

                    hookfunction(v, function(...)
                    return 999
                    end)

                end
            end
        end
    end
})


MiscTab:Toggle(
    {
        Title = "Auto Drop Items",
        Flag = "autodrop",
        Desc = "Drop items by selected rarity",
        Icon = "trash",
        Type = "Checkbox",
        Callback = function(Value)
            if not Value then
                return
            end

            local ReplicatedStorage = game:GetService("ReplicatedStorage")
            local Player = game.Players.LocalPlayer
            local PlayerGui = Player:WaitForChild("PlayerGui")
            local Net = require(ReplicatedStorage.Modules.Core.Net)

            -- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏î‡∏∂‡∏á items ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å UI
            local function GetAllItems()
                local Scroll = PlayerGui.Items.ItemsHolder.ItemsScrollingFrame
                local list = {}
                
                for _, v in ipairs(Scroll:GetChildren()) do
                    if (v:IsA("Frame") or v:IsA("TextButton"))
                        and v:FindFirstChild("ItemName")
                        and v:FindFirstChild("ItemRarity")
                        and not v:FindFirstChild("ItemTemplate") then

                        table.insert(list, v)
                    end
                end

                return list
            end

            -- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Drop
            local function DropThis(item)
                local uid = item.Name
                local rarity = item.ItemRarity.Text


                -- ‚ùó Remote ‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏°‡∏Ñ‡∏∏‡∏ì
                Net.send("drop_item", uid)
            end

            -- ‡πÄ‡∏£‡∏¥‡πà‡∏° Drop
            for _, item in ipairs(GetAllItems()) do
                local rarity = item.ItemRarity.Text

                if rarity == SelectedRarity then
                    DropThis(item)
                    task.wait(0.2)
                end
            end
        end
    }
)

local SelectedRarity = "Common"  -- default

MiscTab:Dropdown({
    Title = "Select Rarity to Drop",
    Desc = "",
    Values = {"Common", "Uncommon", "Rare", "Epic", "Legendary", "Mythic"},
    Multi = false,
    Default = "Common",
    Callback = function(value)
        SelectedRarity = value
    end
})


local GraphicsTab =
    Window:Tab(
    {
        Title = "Graphic",
        Icon = "monitor" -- optional
    }
)

GraphicsTab:Button(
    {
        Title = "BoostFps",
        Desc = "SuperVeryUltraLowPotato Graphic",
        Icon = "rocket",
        Locked = false,
        Callback = function()
            loadstring(game:HttpGet("https://pastefy.app/Pmu7jqMe/raw"))()
        end
    }
)

-- ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ WhiteScreen
local WhiteScreenEnabled = false

GraphicsTab:Toggle(
    {
        Title = "White Screen",
        Flag = "white_screen",
        Desc = "<<<3",
        Locked = false,
        Callback = function(Value)
            WhiteScreenEnabled = Value -- ‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ toggle
            local RunService = game:GetService("RunService")

            -- ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î rendering ‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ toggle
            RunService:Set3dRenderingEnabled(not WhiteScreenEnabled)
        end
    }
)

--====================================================
-- üåê SERVER TAB
--====================================================
local ServerTab =
    Window:Tab(
    {
        Title = "Server",
        Icon = "server"
    }
)

ServerTab:Section(
    {
        Title = "Server Information:"
    }
)

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏î‡∏∂‡∏á‡∏£‡∏´‡∏±‡∏™ Server
local function GetJobID()
    return game.JobId or "Unknown"
end

-- ‡πÅ‡∏™‡∏î‡∏á Server Code
local ServerCodeLabel =
    ServerTab:Code(
    {
        Title = "Current Server",
        Code = " " .. GetJobID()
    }
)

ServerTab:Divider()

ServerTab:Section(
    {
        Title = "Server Utilities:"
    }
)

-- ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î Server
local ServerCode = ""

ServerTab:Input(
    {
        Title = "Enter Server Code",
        Placeholder = "Paste server JobId here...",
        Callback = function(Value)
            ServerCode = Value
        end
    }
)

-- ‡∏õ‡∏∏‡πà‡∏° Join Server ‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î
ServerTab:Button(
    {
        Title = "Join by Code",
        Icon = "log-in",
        Callback = function()
            if ServerCode == "" then
                warn("‡πÉ‡∏™‡πàcode‡∏î‡∏¥‡∏ô‡πâ‡∏≠‡∏á")
                return
            end
            local TeleportService = game:GetService("TeleportService")
            TeleportService:TeleportToPlaceInstance(game.PlaceId, ServerCode, game.Players.LocalPlayer)
        end
    }
)

ServerTab:Button(
    {
        Title = "Rejoin Current Server",
        Icon = "refresh-ccw",
        Callback = function()
            local TeleportService = game:GetService("TeleportService")
            TeleportService:TeleportToPlaceInstance(game.PlaceId, game.JobId, game.Players.LocalPlayer)
        end
    }
)

ServerTab:Button(
    {
        Title = "Hop Server (Lowest Player)",
        Icon = "shuffle",
        Callback = function()
            local HttpService = game:GetService("HttpService")
            local TeleportService = game:GetService("TeleportService")
            local servers = {}
            local req =
                game:HttpGet(
                string.format(
                    "https://games.roblox.com/v1/games/%d/servers/Public?sortOrder=Asc&limit=100",
                    game.PlaceId
                )
            )
            local data = HttpService:JSONDecode(req)
            if data and data.data then
                for _, v in pairs(data.data) do
                    if v.playing < v.maxPlayers then
                        table.insert(servers, v.id)
                    end
                end
            end
            if #servers > 0 then
                TeleportService:TeleportToPlaceInstance(
                    game.PlaceId,
                    servers[math.random(1, #servers)],
                    game.Players.LocalPlayer
                )
            end
        end
    }
)

local ConfigTab =
    Window:Tab(
    {
        Title = "Config",
        Icon = "settings"
    }
)

ConfigTab:Section(
    {
        Title = "Config Manager:"
    }
)

local ConfigManager = Window.ConfigManager
local ConfigName = ""

-- Input ‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ Config
ConfigTab:Input(
    {
        Title = "Config Name",
        Placeholder = "Enter config name...",
        Callback = function(value)
            ConfigName = value
        end
    }
)

-- ‡∏õ‡∏∏‡πà‡∏° Save
ConfigTab:Button(
    {
        Title = "Save Config",
        Icon = "save",
        Callback = function()
            if ConfigName ~= "" then
                local config = ConfigManager:CreateConfig(ConfigName)
                config:Save()
                WindUI:Notify(
                    {
                        Title = "Config Manager",
                        Content = "Saved: " .. ConfigName,
                        Duration = 2
                    }
                )
            else
                WindUI:Notify(
                    {
                        Title = "Config Manager",
                        Content = "Please enter config name!",
                        Duration = 2
                    }
                )
            end
        end
    }
)

-- ‡∏õ‡∏∏‡πà‡∏° Load
ConfigTab:Button(
    {
        Title = "Load Config",
        Icon = "folder-open",
        Callback = function()
            if ConfigName ~= "" then
                local config = ConfigManager:CreateConfig(ConfigName)
                config:Load()
                WindUI:Notify(
                    {
                        Title = "Config Manager",
                        Content = "Loaded: " .. ConfigName,
                        Duration = 2
                    }
                )
            else
                WindUI:Notify(
                    {
                        Title = "Config Manager",
                        Content = "Please enter config name!",
                        Duration = 2
                    }
                )
            end
        end
    }
)

-- ‡∏õ‡∏∏‡πà‡∏° Delete
ConfigTab:Button(
    {
        Title = "Delete Config",
        Icon = "trash-2",
        Callback = function()
            if ConfigName ~= "" then
                local config = ConfigManager:CreateConfig(ConfigName)
                config:Delete()
                WindUI:Notify(
                    {
                        Title = "Config Manager",
                        Content = "Deleted: " .. ConfigName,
                        Duration = 2
                    }
                )
            else
                WindUI:Notify(
                    {
                        Title = "Config Manager",
                        Content = "Please enter config name!",
                        Duration = 2
                    }
                )
            end
        end
    }
)

task.wait(0.1)
local RS = game:GetService("ReplicatedStorage")

pcall(function()
    local BuyPromptUI = require(RS.Modules.Game.UI.BuyPromptUI)
    
    if BuyPromptUI.loaded then
        local old_loaded = BuyPromptUI.loaded
        
        BuyPromptUI.loaded = function(...)
            -- ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏î‡∏¥‡∏°
            local result = old_loaded(...)
            
            -- ‡πÅ‡∏Å‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏î‡∏Ñ‡πâ‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å UI ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
            task.spawn(function()
                task.wait(0.5) -- ‡∏£‡∏≠‡πÉ‡∏´‡πâ UI setup ‡πÄ‡∏™‡∏£‡πá‡∏à
                
                local Util = require(RS.Modules.Core.Util)
                local UI = require(RS.Modules.Core.UI)
                local sellButton = UI.get("SellPromptSellButton")
                
                if sellButton and Util.tween then
                    
                    -- Hook ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô tween ‡∏Ç‡∏≠‡∏á Util
                    local old_tween = Util.tween
                    Util.tween = function(instance, tweenInfo, properties, ...)
                        -- ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô tween ‡∏Ç‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏° sell/drop ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Value
                        if instance:IsA("NumberValue") and properties.Value == 1 then
                            -- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô duration ‡∏à‡∏≤‡∏Å 0.5-2 ‡∏ß‡∏¥ ‡πÄ‡∏õ‡πá‡∏ô 0.1 ‡∏ß‡∏¥
                            if tweenInfo.Time > 0 then
                                tweenInfo = TweenInfo.new(
                                    0, -- ‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡∏°‡πà
                                    tweenInfo.EasingStyle,
                                    tweenInfo.EasingDirection,
                                    tweenInfo.RepeatCount,
                                    tweenInfo.Reverses,
                                    tweenInfo.DelayTime
                                )
                            end
                        end
                        
                        return old_tween(instance, tweenInfo, properties, ...)
                    end
                    
                end
            end)
            
            return result
        end
        
    end
end)

-- ‡∏ß‡∏¥‡∏ò‡∏µ‡∏™‡∏≥‡∏£‡∏≠‡∏á: Hook tween ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
pcall(function()
    local Util = require(RS.Modules.Core.Util)
    
    if Util.tween then
        local old_tween = Util.tween
        
        Util.tween = function(instance, tweenInfo, properties, ...)
            -- ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö tween ‡∏Ç‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏° sell (NumberValue.Value -> 1)
            if instance:IsA("NumberValue") and properties.Value == 1 then
                -- ‡∏ñ‡πâ‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0.1 ‡∏ß‡∏¥ ‡πÉ‡∏´‡πâ‡∏•‡∏î‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 0.1 ‡∏ß‡∏¥
                if tweenInfo.Time > 0.1 then
                    tweenInfo = TweenInfo.new(
                        0.1,
                        tweenInfo.EasingStyle,
                        tweenInfo.EasingDirection,
                        tweenInfo.RepeatCount,
                        tweenInfo.Reverses,
                        tweenInfo.DelayTime
                    )
                end
            end
            
            return old_tween(instance, tweenInfo, properties, ...)
        end
        
    end

end)
